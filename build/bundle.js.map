{"version":3,"file":"bundle.js","sources":["../node_modules/@digitalpersona/core/dist/es5/http/url.js","../node_modules/@digitalpersona/core/dist/es5/biometrics/factor.js","../node_modules/tslib/tslib.es6.js","../node_modules/@digitalpersona/core/dist/es5/encoders/encoders.js","../node_modules/@digitalpersona/core/dist/es5/users/userNameType.js","../node_modules/@digitalpersona/core/dist/es5/users/user.js","../node_modules/@digitalpersona/core/dist/es5/jwt/jwt.js","../node_modules/@digitalpersona/core/dist/es5/jwt/claims.js","../node_modules/@digitalpersona/core/dist/es5/jwt/ticket.js","../node_modules/@digitalpersona/core/dist/es5/credentials/credential.js","../node_modules/@digitalpersona/core/dist/es5/credentials/fingerprints.js","../node_modules/@digitalpersona/core/dist/es5/credentials/face.js","../node_modules/@digitalpersona/core/dist/es5/credentials/questions.js","../node_modules/@digitalpersona/enrollment/dist/es5/private/enroller.js","../node_modules/@digitalpersona/enrollment/dist/es5/tokens/cards/enroll.js","../node_modules/@digitalpersona/enrollment/dist/es5/tokens/face/enroll.js","../node_modules/@digitalpersona/enrollment/dist/es5/tokens/fingerprints/enroll.js","../node_modules/@digitalpersona/enrollment/dist/es5/tokens/otp/actions.js","../node_modules/@digitalpersona/enrollment/dist/es5/tokens/otp/enroll.js","../node_modules/@digitalpersona/enrollment/dist/es5/tokens/password/actions.js","../node_modules/@digitalpersona/enrollment/dist/es5/tokens/password/enroll.js","../node_modules/@digitalpersona/enrollment/dist/es5/tokens/pin/enroll.js","../node_modules/@digitalpersona/enrollment/dist/es5/tokens/questions/enroll.js","../node_modules/u2f-api/dist/lib/generated-google-u2f-api.js","../node_modules/u2f-api/dist/lib/u2f-api.js","../node_modules/u2f-api/dist/index.js","../node_modules/@digitalpersona/enrollment/dist/es5/tokens/u2f/enroll.js","../src/index.js"],"sourcesContent":["/**\r\n * Provides a way to construct sanitized URLs from a base URL, a path and a query object\r\n */\r\nvar Url = /** @class */ (function () {\r\n    /** Constructs an URL object from a base URL, a path and a query object.\r\n     * @param base - base URL, e.g. `https://contoso.com`\r\n     * @param path - optional path, e.g. `api/v1/user`\r\n     * @param query - optional set of query parameters, e.g. `{ name: \"john\", type: \"5\" }`\r\n     * @remarks\r\n     * The URL is built by concatenation of a base URL with sanitized path and query object,\r\n     * adding all needed delimiters. Example:\r\n     * @example\r\n     * ```\r\n     * const url = new Url(\"https://contoso.com\", \"api/v1/user\", { name: \"john\", type: \"5\" });\r\n     * console.log(url.href);\r\n     * > https://contoso.com/api/v1/user?name=john&type=5\r\n     * ```\r\n     */\r\n    function Url(base, path, query) {\r\n        this.href = Url.create(base, path, query);\r\n    }\r\n    /** Builds a sanitized URL query from an JS object.\r\n     * @returns A hyperlink reference.\r\n     */\r\n    Url.getSanitizedQuery = function (query) {\r\n        return Object\r\n            .keys(query)\r\n            .map(function (key) { return [key, query[key]]\r\n            .map(encodeURIComponent)\r\n            .join(\"=\"); })\r\n            .join(\"&\");\r\n    };\r\n    /** Constructs an URL string from a base URL, a path and a query object.\r\n     * @param base - base URL, e.g. `https://contoso.com`\r\n     * @param path - optional path, e.g. `api/v1/user`\r\n     * @param query - optional set of query parameters, e.g. `{ name: \"john\", type: \"5\" }`\r\n     * @remarks\r\n     * The URL is built by concatenation of a base URL with sanitized path and query object,\r\n     * adding all needed delimiters.\r\n     * @example\r\n     * ```typescript\r\n     * const href = Url.create(\"https://contoso.com\", \"api/v1/user\", { name: \"john\", type: \"5\" });\r\n     * console.log(href);\r\n     * ```\r\n     * `> https://contoso.com/api/v1/user?name=john&type=5`\r\n     */\r\n    Url.create = function (base, path, query) {\r\n        return base\r\n            + (path ? \"/\" + encodeURI(path) : \"\")\r\n            + (query ? \"?\" + Url.getSanitizedQuery(query) : \"\");\r\n    };\r\n    return Url;\r\n}());\r\nexport { Url };\r\n//# sourceMappingURL=url.js.map","/**\r\n * Biometric factors.\r\n */\r\nexport var BioFactor;\r\n(function (BioFactor) {\r\n    BioFactor[BioFactor[\"Multiple\"] = 1] = \"Multiple\";\r\n    BioFactor[BioFactor[\"FacialFeatures\"] = 2] = \"FacialFeatures\";\r\n    BioFactor[BioFactor[\"Voice\"] = 4] = \"Voice\";\r\n    BioFactor[BioFactor[\"Fingerprint\"] = 8] = \"Fingerprint\";\r\n    BioFactor[BioFactor[\"Iris\"] = 16] = \"Iris\";\r\n    BioFactor[BioFactor[\"Retina\"] = 32] = \"Retina\";\r\n    BioFactor[BioFactor[\"HandGeometry\"] = 64] = \"HandGeometry\";\r\n    BioFactor[BioFactor[\"SignatureDynamics\"] = 128] = \"SignatureDynamics\";\r\n    BioFactor[BioFactor[\"KeystrokeDynamics\"] = 256] = \"KeystrokeDynamics\";\r\n    BioFactor[BioFactor[\"LipMovement\"] = 512] = \"LipMovement\";\r\n    BioFactor[BioFactor[\"ThermalFaceImage\"] = 1024] = \"ThermalFaceImage\";\r\n    BioFactor[BioFactor[\"ThermalHandImage\"] = 2048] = \"ThermalHandImage\";\r\n    BioFactor[BioFactor[\"Gait\"] = 4096] = \"Gait\";\r\n})(BioFactor || (BioFactor = {}));\r\n/**\r\n * Biometric owner ID registered with {@link http://www.ibia.org/base/cbeff/_biometric_org.phpx | IBIA}.\r\n */\r\nexport var BioSampleFormatOwner;\r\n(function (BioSampleFormatOwner) {\r\n    BioSampleFormatOwner[BioSampleFormatOwner[\"None\"] = 0] = \"None\";\r\n    /** Neurotechnologija (fingerprints). */\r\n    BioSampleFormatOwner[BioSampleFormatOwner[\"Neurotechnologija\"] = 49] = \"Neurotechnologija\";\r\n    /** DigitalPersona (fingerprints) */\r\n    BioSampleFormatOwner[BioSampleFormatOwner[\"DigitalPersona\"] = 51] = \"DigitalPersona\";\r\n    /** Cognitec (face) */\r\n    BioSampleFormatOwner[BioSampleFormatOwner[\"Cognitec\"] = 99] = \"Cognitec\";\r\n    /** Innovatrics (face) */\r\n    BioSampleFormatOwner[BioSampleFormatOwner[\"Innovatrics\"] = 53] = \"Innovatrics\";\r\n})(BioSampleFormatOwner || (BioSampleFormatOwner = {}));\r\n/**\r\n * Biometric sample format info.\r\n */\r\nvar BioSampleFormat = /** @class */ (function () {\r\n    function BioSampleFormat(FormatOwner, FormatID) {\r\n        this.FormatOwner = FormatOwner;\r\n        this.FormatID = FormatID;\r\n    }\r\n    return BioSampleFormat;\r\n}());\r\nexport { BioSampleFormat };\r\n/**\r\n * A representation type of a biometric sample.\r\n */\r\nexport var BioSampleType;\r\n(function (BioSampleType) {\r\n    BioSampleType[BioSampleType[\"Raw\"] = 1] = \"Raw\";\r\n    BioSampleType[BioSampleType[\"Intermediate\"] = 2] = \"Intermediate\";\r\n    BioSampleType[BioSampleType[\"Processed\"] = 4] = \"Processed\";\r\n    BioSampleType[BioSampleType[\"RawWSQCompressed\"] = 8] = \"RawWSQCompressed\";\r\n    BioSampleType[BioSampleType[\"Encrypted\"] = 16] = \"Encrypted\";\r\n    BioSampleType[BioSampleType[\"Signed\"] = 32] = \"Signed\";\r\n})(BioSampleType || (BioSampleType = {}));\r\n/**\r\n * A purpose the biometric sample was intended for.\r\n */\r\nexport var BioSamplePurpose;\r\n(function (BioSamplePurpose) {\r\n    BioSamplePurpose[BioSamplePurpose[\"Any\"] = 0] = \"Any\";\r\n    BioSamplePurpose[BioSamplePurpose[\"Verify\"] = 1] = \"Verify\";\r\n    BioSamplePurpose[BioSamplePurpose[\"Identify\"] = 2] = \"Identify\";\r\n    BioSamplePurpose[BioSamplePurpose[\"Enroll\"] = 3] = \"Enroll\";\r\n    BioSamplePurpose[BioSamplePurpose[\"EnrollForVerificationOnly\"] = 4] = \"EnrollForVerificationOnly\";\r\n    BioSamplePurpose[BioSamplePurpose[\"EnrollForIdentificationOnly\"] = 5] = \"EnrollForIdentificationOnly\";\r\n    BioSamplePurpose[BioSamplePurpose[\"Audit\"] = 6] = \"Audit\";\r\n})(BioSamplePurpose || (BioSamplePurpose = {}));\r\n/**\r\n * A biometric sample encryption type.\r\n */\r\nexport var BioSampleEncryption;\r\n(function (BioSampleEncryption) {\r\n    BioSampleEncryption[BioSampleEncryption[\"None\"] = 0] = \"None\";\r\n    BioSampleEncryption[BioSampleEncryption[\"XTEA\"] = 1] = \"XTEA\";\r\n})(BioSampleEncryption || (BioSampleEncryption = {}));\r\n/**\r\n * Contains meta-information about biometric sample data.\r\n */\r\nvar BioSampleHeader = /** @class */ (function () {\r\n    function BioSampleHeader(\r\n    /** Biometric factor. Must be set to 8 for fingerprint. */\r\n    Factor, \r\n    /** Format owner (vendor) information. */\r\n    Format, \r\n    /** Biometric sample representation type. */\r\n    Type, \r\n    /** Purpose of the biometric sample. */\r\n    Purpose, \r\n    /** Quality of biometric sample. If we don't support quality it should be set to -1.  */\r\n    Quality, \r\n    /** Encryption of biometric sample. */\r\n    Encryption) {\r\n        this.Factor = Factor;\r\n        this.Format = Format;\r\n        this.Type = Type;\r\n        this.Purpose = Purpose;\r\n        this.Quality = Quality;\r\n        this.Encryption = Encryption;\r\n    }\r\n    return BioSampleHeader;\r\n}());\r\nexport { BioSampleHeader };\r\n/**\r\n * A biometric sample.\r\n */\r\nvar BioSample = /** @class */ (function () {\r\n    function BioSample(\r\n    /** Biometric sample header. */\r\n    Header, \r\n    /** Base64url encoded biometric sample data */\r\n    Data) {\r\n        this.Header = Header;\r\n        this.Data = Data;\r\n        /** A version info. */\r\n        this.Version = 1;\r\n    }\r\n    return BioSample;\r\n}());\r\nexport { BioSample };\r\n//# sourceMappingURL=factor.js.map","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","// tslint:disable: ban-types\r\nimport { __read, __spread } from \"tslib\";\r\n/**\r\n * Set of converters to UTF16.\r\n */\r\nvar Utf16 = /** @class */ (function () {\r\n    function Utf16() {\r\n    }\r\n    /** Converts a UTF8 string to a UTF16 string. */\r\n    Utf16.fromUtf8 = function (s) {\r\n        return decodeURIComponent(escape(Utf8.noBom(s)));\r\n    };\r\n    /** Decodes a Base64-encoded string to a UTF16 string. */\r\n    Utf16.fromBase64 = function (s) {\r\n        return Utf16.fromUtf8(Utf8.fromBase64(s));\r\n    };\r\n    /** Decodes a Base64url-encoded string to a UTF16 string. */\r\n    Utf16.fromBase64Url = function (s) {\r\n        return Utf16.fromUtf8(Utf8.fromBase64Url(s));\r\n    };\r\n    /** Appends Byte-Order-Mark (BOM) to the UTF16 string. */\r\n    Utf16.withBom = function (s) { return \"\\uFEFF\" + s; };\r\n    /** Strips a Byte-Order-Mark (BOM) from the UTF16 string. */\r\n    Utf16.noBom = function (s) { return s.replace(/^\\uFEFF/, \"\"); };\r\n    return Utf16;\r\n}());\r\nexport { Utf16 };\r\n/**\r\n * Set of converters to UTF8.\r\n */\r\nvar Utf8 = /** @class */ (function () {\r\n    function Utf8() {\r\n    }\r\n    /** Converts a UTF16 string to a UTF16 string. */\r\n    Utf8.fromUtf16 = function (s) {\r\n        return unescape(encodeURIComponent(Utf16.noBom(s)));\r\n    };\r\n    /** Decodes a Base64-encoded string to a UTF8 string. */\r\n    Utf8.fromBase64 = function (s) {\r\n        return atob(s);\r\n    };\r\n    /** Decodes a Base64url-encoded string to a UTF8 string. */\r\n    Utf8.fromBase64Url = function (s) {\r\n        return Utf8.fromBase64(Base64.fromBase64Url(s));\r\n    };\r\n    /** Converts a byte array to a UTF16 string. */\r\n    Utf8.fromBytes = function (bytes) {\r\n        return String.fromCharCode.apply(String, __spread(bytes));\r\n    };\r\n    /** Appends Byte-Order-Mark (BOM) to the UTF8 string. */\r\n    Utf8.withBom = function (s) { return \"\\xEF\\xBB\\xBF\" + s; };\r\n    /** Strips a Byte-Order-Mark (BOM) from the UTF8 string. */\r\n    Utf8.noBom = function (s) { return s.replace(/^\\xEF\\xBB\\xBF/, \"\"); };\r\n    return Utf8;\r\n}());\r\nexport { Utf8 };\r\n/**\r\n * Set of converters to Base64.\r\n */\r\nvar Base64 = /** @class */ (function () {\r\n    function Base64() {\r\n    }\r\n    /** Encodes a UTF8 string to a Base64-encoded string. */\r\n    Base64.fromUtf8 = function (s) {\r\n        return btoa(s);\r\n    };\r\n    /** Encodes a UTF16 string to a Base64-encoded string.  */\r\n    Base64.fromUtf16 = function (s) {\r\n        return Base64.fromUtf8(Utf8.fromUtf16(s));\r\n    };\r\n    /** Converts a Base64url-encoded string to a Base64-encoded string. */\r\n    Base64.fromBase64Url = function (s) {\r\n        return ((s.length % 4 === 2) ? s + \"==\" :\r\n            (s.length % 4 === 3) ? s + \"=\" : s)\r\n            .replace(/-/g, \"+\")\r\n            .replace(/_/g, \"/\");\r\n    };\r\n    /** Converts a byte array to a Base64-encoded string. */\r\n    Base64.fromBytes = function (bytes) {\r\n        return Base64.fromUtf8(Utf8.fromBytes(bytes));\r\n    };\r\n    /** Encodes a plain JSON object or a string to a Base64-encoded string. */\r\n    Base64.fromJSON = function (obj) {\r\n        return Base64.fromUtf16(JSON.stringify(obj));\r\n    };\r\n    return Base64;\r\n}());\r\nexport { Base64 };\r\n/**\r\n * Set of converters to Base64Url.\r\n */\r\nvar Base64Url = /** @class */ (function () {\r\n    function Base64Url() {\r\n    }\r\n    /** Converts a Base64-encoded string to a Base64url-encoded string. */\r\n    Base64Url.fromBase64 = function (s) {\r\n        return s.replace(/\\=/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\r\n    };\r\n    /** Converts a UTF8 string to a Base64url-encoded string. */\r\n    Base64Url.fromUtf8 = function (s) {\r\n        return Base64Url.fromBase64(Base64.fromUtf8(s));\r\n    };\r\n    /** Converts a UTF16 string to a Base64url-encoded string. */\r\n    Base64Url.fromUtf16 = function (s) {\r\n        return Base64Url.fromBase64(Base64.fromUtf16(s));\r\n    };\r\n    /** Converts a byte array to a Base64url-encoded string. */\r\n    Base64Url.fromBytes = function (bytes) {\r\n        return Base64Url.fromUtf8(Utf8.fromBytes(bytes));\r\n    };\r\n    /** Encodes a plain JSON object or a string to a Base64url-encoded string. */\r\n    Base64Url.fromJSON = function (obj) {\r\n        return Base64Url.fromUtf16(JSON.stringify(obj));\r\n    };\r\n    return Base64Url;\r\n}());\r\nexport { Base64Url };\r\n/**\r\n * Set of converters to Base32.\r\n */\r\nvar Base32 = /** @class */ (function () {\r\n    function Base32() {\r\n    }\r\n    /** Converts a byte array to a Base32-encoded string. */\r\n    Base32.fromBytes = function (bytes) {\r\n        var digits = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\";\r\n        var v1 = 0, v2 = 0, v3 = 0, v4 = 0, v5 = 0, str = '', l = bytes.length, i = 0;\r\n        var count = Math.floor(l / 5) * 5;\r\n        while (i < count) {\r\n            v1 = bytes[i++];\r\n            v2 = bytes[i++];\r\n            v3 = bytes[i++];\r\n            v4 = bytes[i++];\r\n            v5 = bytes[i++];\r\n            str += digits[v1 >>> 3]\r\n                + digits[(v1 << 2 | v2 >>> 6) & 31]\r\n                + digits[(v2 >>> 1) & 31]\r\n                + digits[(v2 << 4 | v3 >>> 4) & 31]\r\n                + digits[(v3 << 1 | v4 >>> 7) & 31]\r\n                + digits[(v4 >>> 2) & 31]\r\n                + digits[(v4 << 3 | v5 >>> 5) & 31]\r\n                + digits[v5 & 31];\r\n        }\r\n        // remain char\r\n        var remain = l - count;\r\n        if (remain === 0)\r\n            return str;\r\n        switch (remain) {\r\n            // @ts-ignore no-switch-case-fall-through\r\n            case 4: v4 = bytes[--l];\r\n            // @ts-ignore no-switch-case-fall-through\r\n            case 3: v3 = bytes[--l];\r\n            // @ts-ignore no-switch-case-fall-through\r\n            case 2: v2 = bytes[--l];\r\n            // @ts-ignore no-switch-case-fall-through\r\n            case 1: v1 = bytes[--l];\r\n        }\r\n        str += digits[v1 >>> 3];\r\n        switch (remain) {\r\n            case 1: return str\r\n                + digits[(v1 << 2) & 31]\r\n                + '======';\r\n            case 2: return str\r\n                + digits[(v1 << 2 | v2 >>> 6) & 31]\r\n                + digits[(v2 >>> 1) & 31]\r\n                + digits[(v2 << 4) & 31]\r\n                + '====';\r\n            case 3: return str\r\n                + digits[(v1 << 2 | v2 >>> 6) & 31]\r\n                + digits[(v2 >>> 1) & 31]\r\n                + digits[(v2 << 4 | v3 >>> 4) & 31]\r\n                + digits[(v3 << 1) & 31]\r\n                + '===';\r\n            case 4: return str\r\n                + digits[(v1 << 2 | v2 >>> 6) & 31]\r\n                + digits[(v2 >>> 1) & 31]\r\n                + digits[(v2 << 4 | v3 >>> 4) & 31]\r\n                + digits[(v3 << 1 | v4 >>> 7) & 31]\r\n                + digits[(v4 >>> 2) & 31]\r\n                + digits[(v4 << 3) & 31]\r\n                + '=';\r\n        }\r\n        return str;\r\n    };\r\n    return Base32;\r\n}());\r\nexport { Base32 };\r\n// export class Hex\r\n// {\r\n//     public static encode = (s: string): HexString =>\r\n//         s.split(\"\").map(cp => ('000' + cp.charCodeAt(0).toString(16)).slice(-4)).join('')\r\n//     public static decode = (s: HexString): string =>\r\n//         s.replace(/(..)/g, '%$1'))\r\n// }\r\n//# sourceMappingURL=encoders.js.map","/** Enumerates supported username formats. */\r\nexport var UserNameType;\r\n(function (UserNameType) {\r\n    /** A name not associated with any Windows account, to be used for local databases only.  */\r\n    UserNameType[UserNameType[\"Unknown\"] = 0] = \"Unknown\";\r\n    /** NetBIOS domain name, for example, “THE_COMPANY”. */\r\n    UserNameType[UserNameType[\"NetBIOSDomain\"] = 1] = \"NetBIOSDomain\";\r\n    /** A DNS domain name, for example, “thecompany.com”. */\r\n    UserNameType[UserNameType[\"DNSDomain\"] = 2] = \"DNSDomain\";\r\n    /** A MS Windows account name, e.g “the_company\\jdoe” (domain\\user) or \"the_company\\\" (domain only). */\r\n    UserNameType[UserNameType[\"SAM\"] = 3] = \"SAM\";\r\n    /** The account name format used in Microsoft(r) Windows NT(r) 4.0, for example, “jdoe”.  */\r\n    UserNameType[UserNameType[\"Simple\"] = 4] = \"Simple\";\r\n    /** A GUID string, for example, “4fa050f0-f561-11cf-bdd9-00aa003a77b6”.  */\r\n    UserNameType[UserNameType[\"UID\"] = 5] = \"UID\";\r\n    /** A user principal name, for example, “jdoe@thecompany.com”.  */\r\n    UserNameType[UserNameType[\"UPN\"] = 6] = \"UPN\";\r\n    /** A friendly display name, for example, “John Doe”. */\r\n    UserNameType[UserNameType[\"Display\"] = 7] = \"Display\";\r\n    /** A user SID string, for example, “S-1-5-21-1004”. */\r\n    UserNameType[UserNameType[\"SID\"] = 8] = \"SID\";\r\n    /** A user name associated with DigitalPersona identity database (formerly known as \"Altus user\"). */\r\n    UserNameType[UserNameType[\"DP\"] = 9] = \"DP\";\r\n})(UserNameType || (UserNameType = {}));\r\n//# sourceMappingURL=userNameType.js.map","import { UserNameType } from './userNameType';\r\nimport { JWT } from '../jwt/jwt';\r\n/**\r\n * Represents a user's identity using a user's name name and a type of the name.\r\n * This class is typially used to pass a user name during authentication.\r\n */\r\nvar User = /** @class */ (function () {\r\n    /** Constructs the object using a username and a user type.\r\n     * @param name - user name. No name transformation/canonicalization is performed.\r\n     * @param type - an optional type of the user. If not provided, he type is deduced automatically.\r\n     * @remarks\r\n     * If no `type` parameter is provided, the username format is analyzes and automatic type is assigned.\r\n     * For example:\r\n     * * \"user\\@comtoso.com\" name will be parsed as a {@link UserNameType.UPN | User Principal Name (UPN)},\r\n     * * \"Domain\\\\UserX\" name will be parsed as a {@link UserNameType.SAM | Security Account Manager (SAM)} name,\r\n     * * \"6de5b5ed-85fc-4298-a18b-dac7d5a18369\" will be parsed as a {@link UserNameType.UID | Unique Identifier (UID)} name,\r\n     * * \"UserX\" name will be parsed as a {@link UserNameType.DP | DigitalPersona name} (used in LDS)\r\n     * You may provide a `type` parameter if you want to enforce a specific name type.\r\n     */\r\n    function User(name, type) {\r\n        var reGUID = /^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/;\r\n        this.name = name || \"\";\r\n        this.type = type || ((this.name.length === 0) ? UserNameType.Unknown :\r\n            (this.name === \"*\") ? UserNameType.Unknown :\r\n                (this.name.indexOf('@') !== -1) ? UserNameType.UPN :\r\n                    (this.name.indexOf('\\\\') !== -1) ? UserNameType.SAM :\r\n                        reGUID.test(this.name) ? UserNameType.UID\r\n                            : UserNameType.DP);\r\n    }\r\n    /** @returns `true` when the User object represents an anonymous user. */\r\n    User.prototype.isAnonymous = function () {\r\n        return !this.name || this.name.length === 0;\r\n    };\r\n    /** @returns `true` whrn the user object represents any user. */\r\n    User.prototype.isEveryone = function () {\r\n        return this.name === \"*\";\r\n    };\r\n    /** Creates a user object representing an anonymous user. */\r\n    User.Anonymous = function () {\r\n        return new User(\"\", UserNameType.Unknown);\r\n    };\r\n    /** Creates a user object representing every user. */\r\n    User.Everyone = function () {\r\n        return new User(\"*\", UserNameType.Unknown);\r\n    };\r\n    /** Creates a user object using claims in a JSON Web Token.\r\n     * @param token - a JSON Web Token.\r\n     * @param type - an optional username type to override automatic type detection and force a specific name format.\r\n     * @returns a user object constructed from the `token` claims.\r\n     * @remarks\r\n     * The `token` should contain either {@link ClaimSet.sub |`sub`} or {@link ClaimSet.wan | `wan`} claim\r\n     * to detect a user name. If no such claims are found, then {@link User.Anonymous | anonymous} user is returned.\r\n     * The {@link ClaimSet.sub |`sub`} claim has a priority over the {@link ClaimSet.wan | `wan`} claim.\r\n     * If `type` parameter is not defined, the name type is deduced automatically from the name string.\r\n     * You may provide a `type` parameter if you want to enforce a specific name type.\r\n     * See {@link User.constructor} for type deduction details.\r\n     */\r\n    User.fromJWT = function (token, type) {\r\n        var claims = JWT.claims(token);\r\n        var user = claims.sub && (claims.sub instanceof User) ? claims.sub :\r\n            claims.wan ? new User(claims.wan, type) :\r\n                claims.sub ? new User(claims.sub, type || UserNameType.DP) : User.Anonymous();\r\n        return user;\r\n    };\r\n    return User;\r\n}());\r\nexport { User };\r\n//# sourceMappingURL=user.js.map","import { __assign } from \"tslib\";\r\nimport { Utf16 } from '../encoders';\r\nimport { User } from '../users/user';\r\n/** Represents a JSON Web Token Header. */\r\nvar JWTHeader = /** @class */ (function () {\r\n    /** Constructs a JWT header. */\r\n    function JWTHeader(typ, alg, cty) {\r\n        this.typ = typ;\r\n        this.cty = cty;\r\n        this.alg = alg;\r\n    }\r\n    return JWTHeader;\r\n}());\r\n/** Represents a JSON Web Token and gives access to the token's payload.\r\n * Note that this class does not allow to validate the token signature in the browser,\r\n * it must be done on a server side.\r\n */\r\nvar JWT = /** @class */ (function () {\r\n    function JWT() {\r\n    }\r\n    /** Extracts a claims set from the JSON Web Token.\r\n     * @param jwt - a JSON Web Token string.\r\n     * @returns a claims set.\r\n     */\r\n    JWT.claims = function (jwt) {\r\n        var parts = jwt.split('.');\r\n        var header = JSON.parse(Utf16.fromBase64Url(parts[0]));\r\n        if (header.cty === \"JWT\") {\r\n            // we have a nested JWT with encrypted payload (JWE).\r\n            // Encrypted nested JWT may replicate some claims in the header to be publicly accessible.\r\n            return __assign(__assign({}, header), new JWTHeader());\r\n        }\r\n        else {\r\n            // unencrypted payload, use claims from the payload only\r\n            var payload = JSON.parse(Utf16.fromBase64Url(parts[1]));\r\n            // convert \"subject\" to a User type\r\n            if (typeof (payload.sub) === \"object\") {\r\n                var _a = payload.sub, name_1 = _a.name, type = _a.type;\r\n                payload.sub = new User(name_1, type);\r\n            }\r\n            return payload;\r\n        }\r\n    };\r\n    /** Validates the JSON Web Token and returns a collection of detected validation errors.\r\n     * @param jwt - a JSON Web Token.\r\n     * @returns an array of errors found, or `null` if the token is valid.\r\n     * @remarks\r\n     * Only client-side checks are performed, no signature validation.\r\n     * The token's claims must satisfy following expression:\r\n     * `iat <= nbf < now < exp`\r\n     * where `iat` is time when the token was issued, `nbf` is a time when the token becomes valid,\r\n     * `exp` is a token expiration time, `now` is current time.\r\n     * Following errors may be returned:\r\n     *\r\n     *   * 'JWT.Error.IssueTimeLaterThanNotBefore' if `iat > nbf`,\r\n     *   * 'JWT.Error.NotEffectiveYet' when `now < nbf`,\r\n     *   * 'JWT.Error.Expired' when `now >= exp`.\r\n     */\r\n    JWT.errors = function (jwt) {\r\n        var e = [];\r\n        var claims = JWT.claims(jwt);\r\n        var now = new Date().getTime() / 1000; // seconds since the epoch start\r\n        // iat < nbf < now < exp\r\n        if (claims.iat && claims.nbf && claims.iat > claims.nbf)\r\n            e.push(new Error('JWT.Error.IssueTimeLaterThanNotBefore'));\r\n        if (claims.nbf && claims.nbf > now)\r\n            e.push(new Error('JWT.Error.NotEffectiveYet'));\r\n        if (claims.exp && claims.exp <= now)\r\n            e.push(new Error('JWT.Error.Expired'));\r\n        return e.length > 0 ? e : null;\r\n    };\r\n    return JWT;\r\n}());\r\nexport { JWT };\r\n//# sourceMappingURL=jwt.js.map","/** Enumerate publicly registered and private DigitalPersona claim names. */\r\nexport var ClaimName;\r\n(function (ClaimName) {\r\n    // registered names\r\n    ClaimName[\"TokensId\"] = \"jti\";\r\n    ClaimName[\"IssuerName\"] = \"iss\";\r\n    ClaimName[\"IssuedAt\"] = \"iat\";\r\n    ClaimName[\"Audience\"] = \"aud\";\r\n    ClaimName[\"NotBefore\"] = \"nbf\";\r\n    ClaimName[\"ExpiresAfter\"] = \"exp\";\r\n    ClaimName[\"SubjectName\"] = \"sub\";\r\n    // private DigitalPersona names\r\n    ClaimName[\"IssuerDomain\"] = \"dom\";\r\n    ClaimName[\"SubjectUid\"] = \"uid\";\r\n    ClaimName[\"ADGuid\"] = \"ad_guid\";\r\n    ClaimName[\"CredentialsUsed\"] = \"crd\";\r\n    ClaimName[\"Group\"] = \"group\";\r\n    ClaimName[\"Role\"] = \"role\";\r\n    ClaimName[\"WindowsAccountName\"] = \"wan\";\r\n    ClaimName[\"T24Principal\"] = \"t24\";\r\n})(ClaimName || (ClaimName = {}));\r\n//# sourceMappingURL=claims.js.map","/**\r\n * A structure wrapping a JSON Web Token to pass it to the DigitalPersona Web Components services.\r\n */\r\nvar Ticket = /** @class */ (function () {\r\n    /** Constructs a ticket object. */\r\n    function Ticket(jwt) {\r\n        this.jwt = jwt;\r\n    }\r\n    /** Creates a ticket with an emtpy token. Used as a placeholder when no token is needed. */\r\n    Ticket.None = function () {\r\n        return new Ticket(\"\");\r\n    };\r\n    return Ticket;\r\n}());\r\nexport { Ticket };\r\n//# sourceMappingURL=ticket.js.map","import { Base64Url } from '../encoders';\r\n/**\r\n * Credential data.\r\n */\r\nvar Credential = /** @class */ (function () {\r\n    /** Constructs a credential. */\r\n    function Credential(id, data, encode) {\r\n        if (encode === void 0) { encode = true; }\r\n        this.id = id;\r\n        this.data = !data ? null\r\n            : !encode ? JSON.stringify(data)\r\n                : Base64Url.fromUtf16(typeof (data) !== \"string\" ? JSON.stringify(data) : data);\r\n    }\r\n    /** Constructs an empty credential object. */\r\n    Credential.None = function () {\r\n        return new Credential(\"\");\r\n    };\r\n    /** Constructs a credential object representing any credential. */\r\n    Credential.Any = function () {\r\n        return new Credential(\"*\");\r\n    };\r\n    // true credentials\r\n    Credential.Password = \"D1A1F561-E14A-4699-9138-2EB523E132CC\";\r\n    Credential.Fingerprints = \"AC184A13-60AB-40E5-A514-E10F777EC2F9\";\r\n    Credential.Face = \"85AEAA44-413B-4DC1-AF09-ADE15892730A\";\r\n    Credential.SmartCard = \"D66CC98D-4153-4987-8EBE-FB46E848EA98\";\r\n    Credential.ContactlessCard = \"F674862D-AC70-48CA-B73E-64A22F3BAC44\";\r\n    Credential.ProximityCard = \"1F31360C-81C0-4EE0-9ACD-5A4400F66CC2\";\r\n    Credential.PIN = \"8A6FCEC3-3C8A-40C2-8AC0-A039EC01BA05\";\r\n    Credential.SecurityQuestions = \"B49E99C6-6C94-42DE-ACD7-FD6B415DF503\";\r\n    Credential.Bluetooth = \"E750A180-577B-47F7-ACD9-F89A7E27FA49\";\r\n    Credential.OneTimePassword = \"324C38BD-0B51-4E4D-BD75-200DA0C8177F\";\r\n    Credential.U2F = \"5D5F73AF-BCE5-4161-9584-42A61AED0E48\";\r\n    Credential.IWA = \"AE922666-9667-49BC-97DA-1EB0E1EF73D2\";\r\n    Credential.Email = \"7845D71D-AB67-4EA7-913C-F81E75C3A087\";\r\n    Credential.Behavior = \"193C41F6-5CF6-4525-84CC-223603DAC9AB\";\r\n    // pseudo-credentials\r\n    Credential.Cards = \"FCFA704C-144B-42DB-8DF3-13F5CD20C525\"; // all card types\r\n    return Credential;\r\n}());\r\nexport { Credential };\r\n//# sourceMappingURL=credential.js.map","/**\r\n * Positions of fingers.\r\n */\r\nexport var FingerPosition;\r\n(function (FingerPosition) {\r\n    FingerPosition[FingerPosition[\"Unknown\"] = 0] = \"Unknown\";\r\n    FingerPosition[FingerPosition[\"RightThumb\"] = 1] = \"RightThumb\";\r\n    FingerPosition[FingerPosition[\"RightIndex\"] = 2] = \"RightIndex\";\r\n    FingerPosition[FingerPosition[\"RightMiddle\"] = 3] = \"RightMiddle\";\r\n    FingerPosition[FingerPosition[\"RightRing\"] = 4] = \"RightRing\";\r\n    FingerPosition[FingerPosition[\"RightLittle\"] = 5] = \"RightLittle\";\r\n    FingerPosition[FingerPosition[\"LeftThumb\"] = 6] = \"LeftThumb\";\r\n    FingerPosition[FingerPosition[\"LeftIndex\"] = 7] = \"LeftIndex\";\r\n    FingerPosition[FingerPosition[\"LeftMiddle\"] = 8] = \"LeftMiddle\";\r\n    FingerPosition[FingerPosition[\"LeftRing\"] = 9] = \"LeftRing\";\r\n    FingerPosition[FingerPosition[\"LeftLittle\"] = 10] = \"LeftLittle\";\r\n})(FingerPosition || (FingerPosition = {}));\r\n/** Finger enrollment data. */\r\nvar Finger = /** @class */ (function () {\r\n    function Finger(\r\n    /** Finger position. */\r\n    position) {\r\n        this.position = position;\r\n    }\r\n    /** Creates the finger enrollment data from a plain JSON object. */\r\n    Finger.fromJson = function (json) {\r\n        var obj = json;\r\n        return new Finger(obj.position);\r\n    };\r\n    return Finger;\r\n}());\r\nexport { Finger };\r\n//# sourceMappingURL=fingerprints.js.map","import { Base64Url } from '../encoders';\r\nimport { BioSample, BioSampleFormat, BioSampleFormatOwner, BioSampleType, BioSampleEncryption, BioSampleHeader, BioSamplePurpose, BioFactor } from \"../biometrics\";\r\nvar FIRData = /** @class */ (function () {\r\n    function FIRData(SDKVersion, Data) {\r\n        this.SDKVersion = SDKVersion;\r\n        this.Data = Data;\r\n        this.version = 1;\r\n    }\r\n    return FIRData;\r\n}());\r\n/**\r\n * Format of a face image sample.\r\n */\r\nexport var FaceImageType;\r\n(function (FaceImageType) {\r\n    FaceImageType[FaceImageType[\"Jpeg\"] = 1] = \"Jpeg\";\r\n})(FaceImageType || (FaceImageType = {}));\r\n/**\r\n * Face image data.\r\n */\r\nvar FaceImage = /** @class */ (function () {\r\n    function FaceImage(\r\n    /** Base64url-encoded image data. */\r\n    ImageData, \r\n    /** Image format. */\r\n    ImageType) {\r\n        if (ImageType === void 0) { ImageType = FaceImageType.Jpeg; }\r\n        this.ImageData = ImageData;\r\n        this.ImageType = ImageType;\r\n        /** Version info. */\r\n        this.Version = 1;\r\n    }\r\n    /** Extracts face image from a data URL. Only `data:image/jpeg;base64` is supported for now. */\r\n    FaceImage.fromDataURL = function (image) {\r\n        return new FaceImage(image.replace(\"data:image/jpeg;base64,\", \"\"));\r\n    };\r\n    /** Extracts face image from a browser's canvas object.  */\r\n    FaceImage.fromCanvas = function (canvas, quality) {\r\n        if (quality === void 0) { quality = 1.0; }\r\n        return FaceImage.fromDataURL(canvas.toDataURL(\"image/jpeg\", quality));\r\n    };\r\n    /** Exports the face image data to a {@link BioSample} object. */\r\n    FaceImage.prototype.toBioSample = function (format, purpose, sdkVersion) {\r\n        if (format === void 0) { format = new BioSampleFormat(BioSampleFormatOwner.None, 0); }\r\n        if (purpose === void 0) { purpose = BioSamplePurpose.Any; }\r\n        if (sdkVersion === void 0) { sdkVersion = 0x30100; }\r\n        return new BioSample(new BioSampleHeader(BioFactor.FacialFeatures, format, BioSampleType.Raw, purpose, -1, BioSampleEncryption.None), Base64Url.fromJSON(this));\r\n    };\r\n    return FaceImage;\r\n}());\r\nexport { FaceImage };\r\n//# sourceMappingURL=face.js.map","/**\r\n * Type of a security question.\r\n */\r\nexport var QuestionType;\r\n(function (QuestionType) {\r\n    /** A security question from a standard predefined list of questions ({@link Question.number} <= 100). */\r\n    QuestionType[QuestionType[\"Regular\"] = 0] = \"Regular\";\r\n    /** A user-defined security question ({@link Question.number} > 100). */\r\n    QuestionType[QuestionType[\"Custom\"] = 1] = \"Custom\";\r\n})(QuestionType || (QuestionType = {}));\r\n/**\r\n * Security question data.\r\n */\r\nvar Question = /** @class */ (function () {\r\n    /** Constructs a security question. */\r\n    function Question(\r\n    /** An index of a question in a question list. */\r\n    number, \r\n    /** A question language ID. */\r\n    lang_id, \r\n    /** A question sublanguage ID. */\r\n    sublang_id, \r\n    /** A keyboard layout for the answer. */\r\n    keyboard_layout, \r\n    /** A text of the security question (only when {@link Question.type} === {@link QuestionType.Custom}) */\r\n    text) {\r\n        this.number = number;\r\n        this.lang_id = lang_id;\r\n        this.sublang_id = sublang_id;\r\n        this.keyboard_layout = keyboard_layout;\r\n        this.text = text;\r\n        /** Version info. */\r\n        this.version = 1;\r\n        this.type = number <= 100 ? QuestionType.Regular : QuestionType.Custom;\r\n        if (this.type === QuestionType.Custom && !text)\r\n            throw new Error(\"Question text is required for custom questions\");\r\n    }\r\n    /** Creates a security question from a plain JSON object. */\r\n    Question.fromJson = function (json) {\r\n        var obj = json;\r\n        return new Question(obj.number, obj.lang_id, obj.sublang_id, obj.keyboard_layout, obj.text);\r\n    };\r\n    return Question;\r\n}());\r\nexport { Question };\r\n/**\r\n * An answer to a security question.\r\n */\r\nvar Answer = /** @class */ (function () {\r\n    /** Creates an answer to a security question. */\r\n    function Answer(question, text) {\r\n        this.text = text;\r\n        this.number = (question instanceof Question) ? question.number : question;\r\n    }\r\n    return Answer;\r\n}());\r\nexport { Answer };\r\n//# sourceMappingURL=questions.js.map","import { User, Ticket } from '@digitalpersona/core';\r\n/** @internal */\r\nvar Enroller = /** @class */ (function () {\r\n    function Enroller(context) {\r\n        this.context = context;\r\n        if (!this.context)\r\n            throw new Error(\"context\");\r\n    }\r\n    Enroller.prototype._canEnroll = function (credId) {\r\n        return this.context.enrollService.IsEnrollmentAllowed(new Ticket(this.context.securityOfficer || \"\"), this.context.getUser(), credId);\r\n    };\r\n    Enroller.prototype._enroll = function (credential) {\r\n        if (this.context.user instanceof User) {\r\n            return this.context.enrollService.EnrollAltusUserCredentials(new Ticket(this.context.securityOfficer || \"\"), this.context.user, credential);\r\n        }\r\n        else {\r\n            return this.context.enrollService.EnrollUserCredentials(new Ticket(this.context.securityOfficer || \"\"), new Ticket(this.context.user), credential);\r\n        }\r\n    };\r\n    Enroller.prototype._unenroll = function (credential) {\r\n        if (this.context.user instanceof User) {\r\n            return this.context.enrollService.DeleteAltusUserCredentials(new Ticket(this.context.securityOfficer || \"\"), this.context.user, credential);\r\n        }\r\n        else {\r\n            return this.context.enrollService.DeleteUserCredentials(new Ticket(this.context.securityOfficer || \"\"), new Ticket(this.context.user), credential);\r\n        }\r\n    };\r\n    return Enroller;\r\n}());\r\nexport { Enroller };\r\n//# sourceMappingURL=enroller.js.map","import { __extends } from \"tslib\";\r\nimport { Credential, Utf8 } from '@digitalpersona/core';\r\nimport { Enroller } from '../../private';\r\n/**\r\n * Smartcard enrollment API.\r\n */\r\nvar SmartCardEnroll = /** @class */ (function (_super) {\r\n    __extends(SmartCardEnroll, _super);\r\n    /** Constructs a new smartcard enrollment API object.\r\n     * @param context - an {@link EnrollmentContext|enrollment context}.\r\n     */\r\n    function SmartCardEnroll(context) {\r\n        return _super.call(this, context) || this;\r\n    }\r\n    /** Reads a list of enrolled cards.\r\n     * @returns a promise to return a list of user's enrolled cards.\r\n     */\r\n    SmartCardEnroll.prototype.getEnrolledCards = function () {\r\n        return this.context.enrollService\r\n            .GetEnrollmentData(this.context.getUser(), Credential.SmartCard)\r\n            .then(function (data) {\r\n            return JSON.parse(Utf8.fromBase64Url(data));\r\n        });\r\n    };\r\n    /** Reads a card enrollment availability.\r\n     * @returns a fulfilled promise when a card can be enrolled, a rejected promise otherwise.\r\n     */\r\n    SmartCardEnroll.prototype.canEnroll = function () {\r\n        return _super.prototype._canEnroll.call(this, Credential.SmartCard);\r\n    };\r\n    /** Enrolls a card.\r\n     * @param cardData - a card enrollment data obtained using {@link CardsReader.getCardEnrollData}.\r\n     * @returns a promise to perform the enrollment or reject in case of an error.\r\n     */\r\n    SmartCardEnroll.prototype.enroll = function (cardData) {\r\n        return _super.prototype._enroll.call(this, new Credential(Credential.SmartCard, cardData));\r\n    };\r\n    /**\r\n     * Deletes a specific smart card enrollment defined by its pubilc key hash.\r\n     * @param keyHash - a key hash of the card. If not provided, all smartcard enrollments will be deleted.\r\n     * @returns a promise to delete the enrollment or reject in case of an error.\r\n     */\r\n    SmartCardEnroll.prototype.unenroll = function (keyHash) {\r\n        return _super.prototype._unenroll.call(this, new Credential(Credential.SmartCard, keyHash));\r\n    };\r\n    return SmartCardEnroll;\r\n}(Enroller));\r\nexport { SmartCardEnroll };\r\n/**\r\n * Contactless card enrollment API.\r\n */\r\nvar ContactlessCardEnroll = /** @class */ (function (_super) {\r\n    __extends(ContactlessCardEnroll, _super);\r\n    /** Constructs a new contactless card enrollment API object.\r\n     * @param context - an {@link EnrollmentContext|enrollment context}.\r\n     */\r\n    function ContactlessCardEnroll(context) {\r\n        return _super.call(this, context) || this;\r\n    }\r\n    /** Reads a card enrollment availability.\r\n     * @returns a fulfilled promise when a card can be enrolled, a rejected promise otherwise.\r\n     */\r\n    ContactlessCardEnroll.prototype.canEnroll = function () {\r\n        return _super.prototype._canEnroll.call(this, Credential.ContactlessCard);\r\n    };\r\n    /** Enrolls a card.\r\n     * @param cardData - a card enrollment data obtained using {@link CardsReader.getCardEnrollData}.\r\n     * @returns a promise to perform the enrollment or reject in case of an error.\r\n     */\r\n    ContactlessCardEnroll.prototype.enroll = function (cardData) {\r\n        return _super.prototype._enroll.call(this, new Credential(Credential.ContactlessCard, cardData));\r\n    };\r\n    /** Deletes the card enrollment.\r\n     * @returns a promise to delete the enrollment or reject in case of an error.\r\n     */\r\n    ContactlessCardEnroll.prototype.unenroll = function () {\r\n        return _super.prototype._unenroll.call(this, new Credential(Credential.ContactlessCard));\r\n    };\r\n    return ContactlessCardEnroll;\r\n}(Enroller));\r\nexport { ContactlessCardEnroll };\r\n/**\r\n * Proximity card enrollment API.\r\n */\r\nvar ProximityCardEnroll = /** @class */ (function (_super) {\r\n    __extends(ProximityCardEnroll, _super);\r\n    /** Constructs a new proximity card enrollment API object.\r\n     * @param context - an {@link EnrollmentContext|enrollment context}.\r\n     */\r\n    function ProximityCardEnroll(context) {\r\n        return _super.call(this, context) || this;\r\n    }\r\n    /** Reads a card enrollment availability.\r\n     * @returns a fulfilled promise when a card can be enrolled, a rejected promise otherwise.\r\n     */\r\n    ProximityCardEnroll.prototype.canEnroll = function () {\r\n        return _super.prototype._canEnroll.call(this, Credential.ProximityCard);\r\n    };\r\n    /** Enrolls a card.\r\n     * @param cardData - a card enrollment data obtained using {@link CardsReader.getCardEnrollData}.\r\n     * @returns a promise to perform the enrollment or reject in case of an error.\r\n     */\r\n    ProximityCardEnroll.prototype.enroll = function (cardData) {\r\n        return _super.prototype._enroll.call(this, new Credential(Credential.ProximityCard, cardData));\r\n    };\r\n    /** Deletes the card enrollment.\r\n     * @returns a promise to delete the enrollment or reject in case of an error.\r\n     */\r\n    ProximityCardEnroll.prototype.unenroll = function () {\r\n        return _super.prototype._unenroll.call(this, new Credential(Credential.ProximityCard));\r\n    };\r\n    return ProximityCardEnroll;\r\n}(Enroller));\r\nexport { ProximityCardEnroll };\r\n//# sourceMappingURL=enroll.js.map","import { __extends } from \"tslib\";\r\nimport { Credential } from '@digitalpersona/core';\r\nimport { Enroller } from '../../private';\r\n/**\r\n * Face enrollment API.\r\n */\r\nvar FaceEnroll = /** @class */ (function (_super) {\r\n    __extends(FaceEnroll, _super);\r\n    /** Constructs a new face enrollment API object.\r\n     * @param context - an {@link EnrollmentContext|enrollment context}.\r\n     */\r\n    function FaceEnroll(context) {\r\n        return _super.call(this, context) || this;\r\n    }\r\n    /** Reads a face enrollment availability.\r\n     * @returns a fulfilled promise when a face can be enrolled, a rejected promise otherwise.\r\n     */\r\n    FaceEnroll.prototype.canEnroll = function () {\r\n        return _super.prototype._canEnroll.call(this, Credential.Face);\r\n    };\r\n    /** Enrolls a face.\r\n     * @param samples - a collection of face images.\r\n     * @returns a promise to perform the enrollment or reject in case of an error.\r\n     */\r\n    FaceEnroll.prototype.enroll = function (samples) {\r\n        return _super.prototype._enroll.call(this, new Credential(Credential.Face, samples));\r\n    };\r\n    /** Deletes the face enrollment.\r\n     * @returns a promise to delete the enrollment or reject in case of an error.\r\n     */\r\n    FaceEnroll.prototype.unenroll = function () {\r\n        return _super.prototype._unenroll.call(this, new Credential(Credential.Face));\r\n    };\r\n    return FaceEnroll;\r\n}(Enroller));\r\nexport { FaceEnroll };\r\n//# sourceMappingURL=enroll.js.map","import { __extends } from \"tslib\";\r\nimport { Credential, Utf8, Finger } from '@digitalpersona/core';\r\nimport { Enroller } from '../../private';\r\n/**\r\n * Fingerprint enrollment API.\r\n */\r\nvar FingerprintsEnroll = /** @class */ (function (_super) {\r\n    __extends(FingerprintsEnroll, _super);\r\n    /** Constructs a new fingerprint enrollment API object.\r\n     * @param context - an {@link EnrollmentContext|enrollment context}.\r\n     */\r\n    function FingerprintsEnroll(context) {\r\n        return _super.call(this, context) || this;\r\n    }\r\n    /** Reads a fingerprint enrollment status.\r\n     * @returns a promise to return fingerprint enrollment data. The data is a collection of enrolled fingers.\r\n     */\r\n    FingerprintsEnroll.prototype.getEnrolledFingers = function () {\r\n        return this.context.enrollService\r\n            .GetEnrollmentData(this.context.getUser(), Credential.Fingerprints)\r\n            .then(function (data) {\r\n            return JSON.parse(Utf8.fromBase64Url(data))\r\n                .map(function (item) { return Finger.fromJson(item); });\r\n        });\r\n    };\r\n    /** Reads a fingerprint enrollment availability.\r\n     * @returns a fulfilled promise when fingerprints can be enrolled, a rejected promise otherwise.\r\n     */\r\n    FingerprintsEnroll.prototype.canEnroll = function () {\r\n        return _super.prototype._canEnroll.call(this, Credential.Fingerprints);\r\n    };\r\n    /** Enrolls a fingerprint.\r\n     * @param position - a position of a finger to enroll\r\n     * @param samples - a collection of fingerprint scans.\r\n     * @returns a promise to perform the enrollment or reject in case of an error.\r\n     */\r\n    FingerprintsEnroll.prototype.enroll = function (position, samples) {\r\n        var data = {\r\n            position: (position instanceof Finger) ? position.position : position,\r\n            samples: samples,\r\n        };\r\n        return _super.prototype._enroll.call(this, new Credential(Credential.Fingerprints, data));\r\n    };\r\n    /** Deletes the fingerprint enrollment.\r\n     * @param position - a position(s) of a finger(s) to delete.\r\n     *                   If not defined, all enrolled fingerprintss will be deleted.\r\n     * @returns a promise to delete the enrollment or reject in case of an error.\r\n     */\r\n    FingerprintsEnroll.prototype.unenroll = function (position) {\r\n        var data = typeof (position) === \"number\" ? [{ position: position }] :\r\n            (position instanceof Finger) ? [position] :\r\n                (position instanceof Array) ? position.map(function (p) { return (p instanceof Finger) ? p.position : p; })\r\n                    : null;\r\n        return _super.prototype._unenroll.call(this, new Credential(Credential.Fingerprints, data));\r\n    };\r\n    return FingerprintsEnroll;\r\n}(Enroller));\r\nexport { FingerprintsEnroll };\r\n//# sourceMappingURL=enroll.js.map","/** @internal */\r\nexport var CustomAction;\r\n(function (CustomAction) {\r\n    CustomAction[CustomAction[\"SendEmailVerificationRequest\"] = 16] = \"SendEmailVerificationRequest\";\r\n    CustomAction[CustomAction[\"SendSMSRequest\"] = 513] = \"SendSMSRequest\";\r\n    CustomAction[CustomAction[\"SendEmailRequest\"] = 514] = \"SendEmailRequest\";\r\n    CustomAction[CustomAction[\"UnlockActiveIdHardwareToken\"] = 515] = \"UnlockActiveIdHardwareToken\";\r\n})(CustomAction || (CustomAction = {}));\r\n//# sourceMappingURL=actions.js.map","import { __extends } from \"tslib\";\r\nimport { User, Credential, JWT, Url, Base32, Ticket, Base64Url } from \"@digitalpersona/core\";\r\nimport { Enroller } from \"../../private\";\r\nimport { CustomAction } from \"./actions\";\r\n/**\r\n * One-time password enrollment API.\r\n */\r\nvar TimeOtpEnroll = /** @class */ (function (_super) {\r\n    __extends(TimeOtpEnroll, _super);\r\n    /** Constructs a new One-Time Password enrollment API object.\r\n     * @param context - an {@link EnrollmentContext|enrollment context}.\r\n     */\r\n    function TimeOtpEnroll(context) {\r\n        return _super.call(this, context) || this;\r\n    }\r\n    /**\r\n     * Converts a secret key to a Key URI, which will be encode as a QR Code image to scan.\r\n     * @param key - a secret key to convert to a Key URI string.\r\n     * @returns - a promise to return a Key URI string\r\n     * @remarks\r\n     * For Push Notifications fo AD users, make sure the user's token has an `ad_guid` claim.\r\n     * You may need to use `ClaimsService.GetClaims()` method to append this claim to an existing token.\r\n     */\r\n    TimeOtpEnroll.prototype.createKeyUri = function (key) {\r\n        var type = \"totp\";\r\n        var jwt = this.context.getJWT();\r\n        var claims = JWT.claims(jwt);\r\n        if (!claims)\r\n            return Promise.reject(new Error('NoClaims'));\r\n        var issuer = claims.dom || claims.iss; // will be used as a prefix of a label\r\n        if (!issuer)\r\n            return Promise.reject(new Error('NoIssuer'));\r\n        var uid = claims.uid || claims[\"ad_guid\"]; // required for Push OTP. Also needs TenantID.\r\n        var username = this.context.getUser().name;\r\n        var secret = Base32.fromBytes(key);\r\n        return this.context.enrollService\r\n            .GetEnrollmentData(User.Anonymous(), Credential.OneTimePassword)\r\n            .then(function (data) {\r\n            var otpData = JSON.parse(data);\r\n            if (!otpData)\r\n                return Promise.reject(new Error(\"NoEnrollmentData\"));\r\n            var pushSupported = uid && otpData.pn_tenant_id;\r\n            var uri = new Url(\"otpauth://\" + type, issuer + \":\" + username, {\r\n                secret: secret,\r\n                issuer: issuer,\r\n                apikey: otpData.pn_api_key,\r\n                tenantid: pushSupported ? otpData.pn_tenant_id : undefined,\r\n                useruuid: pushSupported ? uid : undefined,\r\n            });\r\n            return uri.href;\r\n        });\r\n    };\r\n    /**\r\n     * Sends an verification code using SMS to the user's device.\r\n     * @param key - a secret key to \"seed\" an OTP generator and start generating verification codes.\r\n     * @param phoneNumber - a phone number to send a current verification code to.\r\n     */\r\n    TimeOtpEnroll.prototype.sendVerificationCode = function (key, phoneNumber) {\r\n        return this.context.enrollService\r\n            .CustomAction(Ticket.None(), this.context.getUser(), new Credential(Credential.OneTimePassword, {\r\n            key: Base64Url.fromBytes(key),\r\n            phoneNumber: phoneNumber,\r\n        }), CustomAction.SendSMSRequest)\r\n            .then();\r\n    };\r\n    /**\r\n     * Enrolls One-Time Password using a software TOTP (e.g. DigitalPersona app, Google Authenticator etc.)\r\n     * @param code - a verification code entered by a user.\r\n     * @param key - a secret key used to \"seed\" an OTP generator.\r\n     * @param phoneNumber - a phone number the verification code was sent to\r\n     * @returns a promise to perform the enrollment or reject in case of an error.\r\n     */\r\n    TimeOtpEnroll.prototype.enrollSoftwareOtp = function (code, key, phoneNumber) {\r\n        return _super.prototype._enroll.call(this, new Credential(Credential.OneTimePassword, {\r\n            otp: code,\r\n            key: Base64Url.fromBytes(key),\r\n            phoneNumber: phoneNumber,\r\n        }));\r\n    };\r\n    /**\r\n     * Enrolls a hardware TOTP token.\r\n     * @param code - a verification code entered by a user.\r\n     * @param serialNumber - a serial number of the TOTP token.\r\n     * @param counter - an optional counter displayed on some token models.\r\n     * @param timer - an optional timer displayed on some token models\r\n     * @returns a promise to perform the enrollment or reject in case of an error.\r\n     */\r\n    TimeOtpEnroll.prototype.enrollHardwareOtp = function (code, serialNumber, counter, timer) {\r\n        return _super.prototype._enroll.call(this, new Credential(Credential.OneTimePassword, {\r\n            otp: code,\r\n            serialNumber: serialNumber,\r\n            counter: counter,\r\n            timer: timer,\r\n        }));\r\n    };\r\n    /** Deletes the OTP enrollment.\r\n     * @returns a promise to delete the enrollment or reject in case of an error.\r\n     */\r\n    TimeOtpEnroll.prototype.unenroll = function () {\r\n        return _super.prototype._unenroll.call(this, new Credential(Credential.OneTimePassword));\r\n    };\r\n    return TimeOtpEnroll;\r\n}(Enroller));\r\nexport { TimeOtpEnroll };\r\n//# sourceMappingURL=enroll.js.map","/** @internal */\r\nexport var CustomAction;\r\n(function (CustomAction) {\r\n    CustomAction[CustomAction[\"PasswordRandomization\"] = 4] = \"PasswordRandomization\";\r\n    CustomAction[CustomAction[\"PasswordReset\"] = 13] = \"PasswordReset\";\r\n})(CustomAction || (CustomAction = {}));\r\n//# sourceMappingURL=actions.js.map","import { __extends } from \"tslib\";\r\nimport { Credential, Ticket } from '@digitalpersona/core';\r\nimport { CustomAction } from './actions';\r\nimport { Enroller } from '../../private';\r\n/**\r\n * Password enrollment API.\r\n * @remarks\r\n * As a primary credential, user's password cannot be unenroled, it can only be changed, reset or randomized.\r\n */\r\nvar PasswordEnroll = /** @class */ (function (_super) {\r\n    __extends(PasswordEnroll, _super);\r\n    /** Constructs a new password enrollment API object.\r\n     * @param context - an {@link EnrollmentContext|enrollment context}.\r\n     */\r\n    function PasswordEnroll(context) {\r\n        return _super.call(this, context) || this;\r\n    }\r\n    /** Reads a password change availability.\r\n     * @returns a fulfilled promise when a password can be changed, a rejected promise otherwise.\r\n     */\r\n    PasswordEnroll.prototype.canEnroll = function () {\r\n        return _super.prototype._canEnroll.call(this, Credential.Password);\r\n    };\r\n    /**\r\n     * Changes a password.\r\n     * @param newPassword - a new password.\r\n     * @param oldPassword - a password to replace. Must match the existing password.\r\n     * @returns a promise to perform the password change or reject in case of an error.\r\n     */\r\n    PasswordEnroll.prototype.enroll = function (newPassword, oldPassword) {\r\n        return _super.prototype._enroll.call(this, new Credential(Credential.Password, { oldPassword: oldPassword, newPassword: newPassword }));\r\n    };\r\n    /**\r\n     * Resets a password.\r\n     * @param newPassword - a new password which will replace any existing password.\r\n     * @returns a promise to perform the password reset or reject in case of an error.\r\n     * @remarks\r\n     * DigitalPersona AD Server supports password randomization only for ActiveDirectory users.\r\n     * DigitalPersona LDS Server supports password randomization only for DigitalPersona users (formerly \"Altus Users\").\r\n     */\r\n    PasswordEnroll.prototype.reset = function (newPassword) {\r\n        return _super.prototype._enroll.call(this, new Credential(Credential.Password, newPassword));\r\n    };\r\n    /**\r\n     * Creates a new strong password with good complexity properties.\r\n     * @returns a promise to return a randomized password.\r\n     * @remarks\r\n     * DigitalPersona AD Server supports password randomization only for ActiveDirectory users.\r\n     * DigitalPersona LDS Server supports password randomization only for DigitalPersona users (formerly \"Altus Users\").\r\n     */\r\n    PasswordEnroll.prototype.randomize = function () {\r\n        return this.context.enrollService.CustomAction(new Ticket(this.context.securityOfficer || \"\"), this.context.getUser(), new Credential(Credential.Password), CustomAction.PasswordRandomization);\r\n    };\r\n    return PasswordEnroll;\r\n}(Enroller));\r\nexport { PasswordEnroll };\r\n//# sourceMappingURL=enroll.js.map","import { __extends } from \"tslib\";\r\nimport { Credential } from '@digitalpersona/core';\r\nimport { Enroller } from '../../private';\r\n/**\r\n * Personal Identification Number (PIN) enrollment API.\r\n */\r\nvar PinEnroll = /** @class */ (function (_super) {\r\n    __extends(PinEnroll, _super);\r\n    /** Constructs a new PIN enrollment API object.\r\n     * @param context - an {@link EnrollmentContext|enrollment context}.\r\n     */\r\n    function PinEnroll(context) {\r\n        return _super.call(this, context) || this;\r\n    }\r\n    /** Reads a PIN enrollment availability.\r\n     * @returns a fulfilled promise when a PIN can be enrolled, a rejected promise otherwise.\r\n     */\r\n    PinEnroll.prototype.canEnroll = function () {\r\n        return _super.prototype._canEnroll.call(this, Credential.PIN);\r\n    };\r\n    /** Enrolls a PIN.\r\n     * @param pin - a Personal Identification Number (PIN).\r\n     * @returns a promise to perform the enrollment or reject in case of an error.\r\n     */\r\n    PinEnroll.prototype.enroll = function (pin) {\r\n        return _super.prototype._enroll.call(this, new Credential(Credential.PIN, pin));\r\n    };\r\n    /** Deletes the PIN enrollment.\r\n     * @returns a promise to delete the enrollment or reject in case of an error.\r\n     */\r\n    PinEnroll.prototype.unenroll = function () {\r\n        return _super.prototype._unenroll.call(this, new Credential(Credential.PIN));\r\n    };\r\n    return PinEnroll;\r\n}(Enroller));\r\nexport { PinEnroll };\r\n//# sourceMappingURL=enroll.js.map","import { __extends } from \"tslib\";\r\nimport { Credential, Question, Utf8 } from '@digitalpersona/core';\r\nimport { Enroller } from '../../private';\r\n/**\r\n * Security Questions enrollment API.\r\n */\r\nvar SecurityQuestionsEnroll = /** @class */ (function (_super) {\r\n    __extends(SecurityQuestionsEnroll, _super);\r\n    /** Constructs a new Security Questions enrollment API object.\r\n     * @param context - an {@link EnrollmentContext|enrollment context}.\r\n     */\r\n    function SecurityQuestionsEnroll(context) {\r\n        return _super.call(this, context) || this;\r\n    }\r\n    /**\r\n     * Reads enrolled Security Questions.\r\n     * @returns a promise to return a collection of enrolled Security Questions.\r\n     */\r\n    SecurityQuestionsEnroll.prototype.getEnrolledQuestions = function () {\r\n        return this.context.enrollService\r\n            .GetEnrollmentData(this.context.getUser(), Credential.SecurityQuestions)\r\n            .then(function (data) {\r\n            return JSON.parse(Utf8.fromBase64Url(data))\r\n                .map(function (item) { return Question.fromJson(item); });\r\n        });\r\n    };\r\n    /** Reads a Security Questions enrollment availability.\r\n     * @returns a fulfilled promise when Security Questions can be enrolled, a rejected promise otherwise.\r\n     */\r\n    SecurityQuestionsEnroll.prototype.canEnroll = function () {\r\n        return _super.prototype._canEnroll.call(this, Credential.SecurityQuestions);\r\n    };\r\n    /**\r\n     * Enrolls Security Questions.\r\n     * @param questionsWithAnswers - a colelction of user's answers to Security Questions.\r\n     * @returns a promise to perform the enrollment or reject in case of an error.\r\n     */\r\n    SecurityQuestionsEnroll.prototype.enroll = function (questionsWithAnswers) {\r\n        var equal = function (a, b) {\r\n            return a.question.number === b.question.number;\r\n        };\r\n        var unique = function (val, idx, arr) {\r\n            return arr.findIndex(function (qa) { return equal(qa, val); }) === idx;\r\n        };\r\n        var data = questionsWithAnswers\r\n            .filter(function (qa) { return qa.question.number === qa.answer.number; })\r\n            .filter(unique)\r\n            .sort(function (a, b) { return b.question.number - a.question.number; }); // server requires reverse order\r\n        return _super.prototype._enroll.call(this, new Credential(Credential.SecurityQuestions, data));\r\n    };\r\n    /** Deletes the Security Question enrollment.\r\n     * @returns a promise to delete the enrollment or reject in case of an error.\r\n     */\r\n    SecurityQuestionsEnroll.prototype.unenroll = function () {\r\n        return _super.prototype._unenroll.call(this, new Credential(Credential.SecurityQuestions));\r\n    };\r\n    return SecurityQuestionsEnroll;\r\n}(Enroller));\r\nexport { SecurityQuestionsEnroll };\r\n//# sourceMappingURL=enroll.js.map","//Copyright 2014-2015 Google Inc. All rights reserved.\n\n//Use of this source code is governed by a BSD-style\n//license that can be found in the LICENSE file or at\n//https://developers.google.com/open-source/licenses/bsd\n\n/**\n * @fileoverview The U2F api.\n */\n// 'use strict';\n\n\n/**\n * Namespace for the U2F api.\n * @type {Object}\n */\nvar u2f = u2f || {};\n\nmodule.exports.chromeApi = u2f; // Adaptation for u2f-api package\n\n/**\n * FIDO U2F Javascript API Version\n * @number\n */\nvar js_api_version;\n\n/**\n * The U2F extension id\n * @const {string}\n */\n// The Chrome packaged app extension ID.\n// Uncomment this if you want to deploy a server instance that uses\n// the package Chrome app and does not require installing the U2F Chrome extension.\n u2f.EXTENSION_ID = 'kmendfapggjehodndflmmgagdbamhnfd';\n// The U2F Chrome extension ID.\n// Uncomment this if you want to deploy a server instance that uses\n// the U2F Chrome extension to authenticate.\n// u2f.EXTENSION_ID = 'pfboblefjcgdjicmnffhdgionmgcdmne';\n\n\n/**\n * Message types for messsages to/from the extension\n * @const\n * @enum {string}\n */\nu2f.MessageTypes = {\n    'U2F_REGISTER_REQUEST': 'u2f_register_request',\n    'U2F_REGISTER_RESPONSE': 'u2f_register_response',\n    'U2F_SIGN_REQUEST': 'u2f_sign_request',\n    'U2F_SIGN_RESPONSE': 'u2f_sign_response',\n    'U2F_GET_API_VERSION_REQUEST': 'u2f_get_api_version_request',\n    'U2F_GET_API_VERSION_RESPONSE': 'u2f_get_api_version_response'\n};\n\n\n/**\n * Response status codes\n * @const\n * @enum {number}\n */\nu2f.ErrorCodes = {\n    'OK': 0,\n    'OTHER_ERROR': 1,\n    'BAD_REQUEST': 2,\n    'CONFIGURATION_UNSUPPORTED': 3,\n    'DEVICE_INELIGIBLE': 4,\n    'TIMEOUT': 5\n};\n\n\n/**\n * A message for registration requests\n * @typedef {{\n *   type: u2f.MessageTypes,\n *   appId: ?string,\n *   timeoutSeconds: ?number,\n *   requestId: ?number\n * }}\n */\nu2f.U2fRequest;\n\n\n/**\n * A message for registration responses\n * @typedef {{\n *   type: u2f.MessageTypes,\n *   responseData: (u2f.Error | u2f.RegisterResponse | u2f.SignResponse),\n *   requestId: ?number\n * }}\n */\nu2f.U2fResponse;\n\n\n/**\n * An error object for responses\n * @typedef {{\n *   errorCode: u2f.ErrorCodes,\n *   errorMessage: ?string\n * }}\n */\nu2f.Error;\n\n/**\n * Data object for a single sign request.\n * @typedef {enum {BLUETOOTH_RADIO, BLUETOOTH_LOW_ENERGY, USB, NFC, USB_INTERNAL}}\n */\nu2f.Transport;\n\n\n/**\n * Data object for a single sign request.\n * @typedef {Array<u2f.Transport>}\n */\nu2f.Transports;\n\n/**\n * Data object for a single sign request.\n * @typedef {{\n *   version: string,\n *   challenge: string,\n *   keyHandle: string,\n *   appId: string\n * }}\n */\nu2f.SignRequest;\n\n\n/**\n * Data object for a sign response.\n * @typedef {{\n *   keyHandle: string,\n *   signatureData: string,\n *   clientData: string\n * }}\n */\nu2f.SignResponse;\n\n\n/**\n * Data object for a registration request.\n * @typedef {{\n *   version: string,\n *   challenge: string\n * }}\n */\nu2f.RegisterRequest;\n\n\n/**\n * Data object for a registration response.\n * @typedef {{\n *   version: string,\n *   keyHandle: string,\n *   transports: Transports,\n *   appId: string\n * }}\n */\nu2f.RegisterResponse;\n\n\n/**\n * Data object for a registered key.\n * @typedef {{\n *   version: string,\n *   keyHandle: string,\n *   transports: ?Transports,\n *   appId: ?string\n * }}\n */\nu2f.RegisteredKey;\n\n\n/**\n * Data object for a get API register response.\n * @typedef {{\n *   js_api_version: number\n * }}\n */\nu2f.GetJsApiVersionResponse;\n\n\n//Low level MessagePort API support\n\n/**\n * Sets up a MessagePort to the U2F extension using the\n * available mechanisms.\n * @param {function((MessagePort|u2f.WrappedChromeRuntimePort_))} callback\n */\nu2f.getMessagePort = function(callback) {\n  if (typeof chrome != 'undefined' && chrome.runtime) {\n    // The actual message here does not matter, but we need to get a reply\n    // for the callback to run. Thus, send an empty signature request\n    // in order to get a failure response.\n    var msg = {\n        type: u2f.MessageTypes.U2F_SIGN_REQUEST,\n        signRequests: []\n    };\n    chrome.runtime.sendMessage(u2f.EXTENSION_ID, msg, function() {\n      if (!chrome.runtime.lastError) {\n        // We are on a whitelisted origin and can talk directly\n        // with the extension.\n        u2f.getChromeRuntimePort_(callback);\n      } else {\n        // chrome.runtime was available, but we couldn't message\n        // the extension directly, use iframe\n        u2f.getIframePort_(callback);\n      }\n    });\n  } else if (u2f.isAndroidChrome_()) {\n    u2f.getAuthenticatorPort_(callback);\n  } else if (u2f.isIosChrome_()) {\n    u2f.getIosPort_(callback);\n  } else {\n    // chrome.runtime was not available at all, which is normal\n    // when this origin doesn't have access to any extensions.\n    u2f.getIframePort_(callback);\n  }\n};\n\n/**\n * Detect chrome running on android based on the browser's useragent.\n * @private\n */\nu2f.isAndroidChrome_ = function() {\n  var userAgent = navigator.userAgent;\n  return userAgent.indexOf('Chrome') != -1 &&\n  userAgent.indexOf('Android') != -1;\n};\n\n/**\n * Detect chrome running on iOS based on the browser's platform.\n * @private\n */\nu2f.isIosChrome_ = function() {\n  return [\"iPhone\", \"iPad\", \"iPod\"].indexOf(navigator.platform) > -1;\n};\n\n/**\n * Connects directly to the extension via chrome.runtime.connect.\n * @param {function(u2f.WrappedChromeRuntimePort_)} callback\n * @private\n */\nu2f.getChromeRuntimePort_ = function(callback) {\n  var port = chrome.runtime.connect(u2f.EXTENSION_ID,\n      {'includeTlsChannelId': true});\n  setTimeout(function() {\n    callback(new u2f.WrappedChromeRuntimePort_(port));\n  }, 0);\n};\n\n/**\n * Return a 'port' abstraction to the Authenticator app.\n * @param {function(u2f.WrappedAuthenticatorPort_)} callback\n * @private\n */\nu2f.getAuthenticatorPort_ = function(callback) {\n  setTimeout(function() {\n    callback(new u2f.WrappedAuthenticatorPort_());\n  }, 0);\n};\n\n/**\n * Return a 'port' abstraction to the iOS client app.\n * @param {function(u2f.WrappedIosPort_)} callback\n * @private\n */\nu2f.getIosPort_ = function(callback) {\n  setTimeout(function() {\n    callback(new u2f.WrappedIosPort_());\n  }, 0);\n};\n\n/**\n * A wrapper for chrome.runtime.Port that is compatible with MessagePort.\n * @param {Port} port\n * @constructor\n * @private\n */\nu2f.WrappedChromeRuntimePort_ = function(port) {\n  this.port_ = port;\n};\n\n/**\n * Format and return a sign request compliant with the JS API version supported by the extension.\n * @param {Array<u2f.SignRequest>} signRequests\n * @param {number} timeoutSeconds\n * @param {number} reqId\n * @return {Object}\n */\nu2f.formatSignRequest_ =\n  function(appId, challenge, registeredKeys, timeoutSeconds, reqId) {\n  if (js_api_version === undefined || js_api_version < 1.1) {\n    // Adapt request to the 1.0 JS API\n    var signRequests = [];\n    for (var i = 0; i < registeredKeys.length; i++) {\n      signRequests[i] = {\n          version: registeredKeys[i].version,\n          challenge: challenge,\n          keyHandle: registeredKeys[i].keyHandle,\n          appId: appId\n      };\n    }\n    return {\n      type: u2f.MessageTypes.U2F_SIGN_REQUEST,\n      signRequests: signRequests,\n      timeoutSeconds: timeoutSeconds,\n      requestId: reqId\n    };\n  }\n  // JS 1.1 API\n  return {\n    type: u2f.MessageTypes.U2F_SIGN_REQUEST,\n    appId: appId,\n    challenge: challenge,\n    registeredKeys: registeredKeys,\n    timeoutSeconds: timeoutSeconds,\n    requestId: reqId\n  };\n};\n\n/**\n * Format and return a register request compliant with the JS API version supported by the extension..\n * @param {Array<u2f.SignRequest>} signRequests\n * @param {Array<u2f.RegisterRequest>} signRequests\n * @param {number} timeoutSeconds\n * @param {number} reqId\n * @return {Object}\n */\nu2f.formatRegisterRequest_ =\n  function(appId, registeredKeys, registerRequests, timeoutSeconds, reqId) {\n  if (js_api_version === undefined || js_api_version < 1.1) {\n    // Adapt request to the 1.0 JS API\n    for (var i = 0; i < registerRequests.length; i++) {\n      registerRequests[i].appId = appId;\n    }\n    var signRequests = [];\n    for (var i = 0; i < registeredKeys.length; i++) {\n      signRequests[i] = {\n          version: registeredKeys[i].version,\n          challenge: registerRequests[0],\n          keyHandle: registeredKeys[i].keyHandle,\n          appId: appId\n      };\n    }\n    return {\n      type: u2f.MessageTypes.U2F_REGISTER_REQUEST,\n      signRequests: signRequests,\n      registerRequests: registerRequests,\n      timeoutSeconds: timeoutSeconds,\n      requestId: reqId\n    };\n  }\n  // JS 1.1 API\n  return {\n    type: u2f.MessageTypes.U2F_REGISTER_REQUEST,\n    appId: appId,\n    registerRequests: registerRequests,\n    registeredKeys: registeredKeys,\n    timeoutSeconds: timeoutSeconds,\n    requestId: reqId\n  };\n};\n\n\n/**\n * Posts a message on the underlying channel.\n * @param {Object} message\n */\nu2f.WrappedChromeRuntimePort_.prototype.postMessage = function(message) {\n  this.port_.postMessage(message);\n};\n\n\n/**\n * Emulates the HTML 5 addEventListener interface. Works only for the\n * onmessage event, which is hooked up to the chrome.runtime.Port.onMessage.\n * @param {string} eventName\n * @param {function({data: Object})} handler\n */\nu2f.WrappedChromeRuntimePort_.prototype.addEventListener =\n    function(eventName, handler) {\n  var name = eventName.toLowerCase();\n  if (name == 'message' || name == 'onmessage') {\n    this.port_.onMessage.addListener(function(message) {\n      // Emulate a minimal MessageEvent object\n      handler({'data': message});\n    });\n  } else {\n    console.error('WrappedChromeRuntimePort only supports onMessage');\n  }\n};\n\n/**\n * Wrap the Authenticator app with a MessagePort interface.\n * @constructor\n * @private\n */\nu2f.WrappedAuthenticatorPort_ = function() {\n  this.requestId_ = -1;\n  this.requestObject_ = null;\n}\n\n/**\n * Launch the Authenticator intent.\n * @param {Object} message\n */\nu2f.WrappedAuthenticatorPort_.prototype.postMessage = function(message) {\n  var intentUrl =\n    u2f.WrappedAuthenticatorPort_.INTENT_URL_BASE_ +\n    ';S.request=' + encodeURIComponent(JSON.stringify(message)) +\n    ';end';\n  document.location = intentUrl;\n};\n\n/**\n * Tells what type of port this is.\n * @return {String} port type\n */\nu2f.WrappedAuthenticatorPort_.prototype.getPortType = function() {\n  return \"WrappedAuthenticatorPort_\";\n};\n\n\n/**\n * Emulates the HTML 5 addEventListener interface.\n * @param {string} eventName\n * @param {function({data: Object})} handler\n */\nu2f.WrappedAuthenticatorPort_.prototype.addEventListener = function(eventName, handler) {\n  var name = eventName.toLowerCase();\n  if (name == 'message') {\n    var self = this;\n    /* Register a callback to that executes when\n     * chrome injects the response. */\n    window.addEventListener(\n        'message', self.onRequestUpdate_.bind(self, handler), false);\n  } else {\n    console.error('WrappedAuthenticatorPort only supports message');\n  }\n};\n\n/**\n * Callback invoked  when a response is received from the Authenticator.\n * @param function({data: Object}) callback\n * @param {Object} message message Object\n */\nu2f.WrappedAuthenticatorPort_.prototype.onRequestUpdate_ =\n    function(callback, message) {\n  var messageObject = JSON.parse(message.data);\n  var intentUrl = messageObject['intentURL'];\n\n  var errorCode = messageObject['errorCode'];\n  var responseObject = null;\n  if (messageObject.hasOwnProperty('data')) {\n    responseObject = /** @type {Object} */ (\n        JSON.parse(messageObject['data']));\n  }\n\n  callback({'data': responseObject});\n};\n\n/**\n * Base URL for intents to Authenticator.\n * @const\n * @private\n */\nu2f.WrappedAuthenticatorPort_.INTENT_URL_BASE_ =\n  'intent:#Intent;action=com.google.android.apps.authenticator.AUTHENTICATE';\n\n/**\n * Wrap the iOS client app with a MessagePort interface.\n * @constructor\n * @private\n */\nu2f.WrappedIosPort_ = function() {};\n\n/**\n * Launch the iOS client app request\n * @param {Object} message\n */\nu2f.WrappedIosPort_.prototype.postMessage = function(message) {\n  var str = JSON.stringify(message);\n  var url = \"u2f://auth?\" + encodeURI(str);\n  location.replace(url);\n};\n\n/**\n * Tells what type of port this is.\n * @return {String} port type\n */\nu2f.WrappedIosPort_.prototype.getPortType = function() {\n  return \"WrappedIosPort_\";\n};\n\n/**\n * Emulates the HTML 5 addEventListener interface.\n * @param {string} eventName\n * @param {function({data: Object})} handler\n */\nu2f.WrappedIosPort_.prototype.addEventListener = function(eventName, handler) {\n  var name = eventName.toLowerCase();\n  if (name !== 'message') {\n    console.error('WrappedIosPort only supports message');\n  }\n};\n\n/**\n * Sets up an embedded trampoline iframe, sourced from the extension.\n * @param {function(MessagePort)} callback\n * @private\n */\nu2f.getIframePort_ = function(callback) {\n  // Create the iframe\n  var iframeOrigin = 'chrome-extension://' + u2f.EXTENSION_ID;\n  var iframe = document.createElement('iframe');\n  iframe.src = iframeOrigin + '/u2f-comms.html';\n  iframe.setAttribute('style', 'display:none');\n  document.body.appendChild(iframe);\n\n  var channel = new MessageChannel();\n  var ready = function(message) {\n    if (message.data == 'ready') {\n      channel.port1.removeEventListener('message', ready);\n      callback(channel.port1);\n    } else {\n      console.error('First event on iframe port was not \"ready\"');\n    }\n  };\n  channel.port1.addEventListener('message', ready);\n  channel.port1.start();\n\n  iframe.addEventListener('load', function() {\n    // Deliver the port to the iframe and initialize\n    iframe.contentWindow.postMessage('init', iframeOrigin, [channel.port2]);\n  });\n};\n\n\n//High-level JS API\n\n/**\n * Default extension response timeout in seconds.\n * @const\n */\nu2f.EXTENSION_TIMEOUT_SEC = 30;\n\n/**\n * A singleton instance for a MessagePort to the extension.\n * @type {MessagePort|u2f.WrappedChromeRuntimePort_}\n * @private\n */\nu2f.port_ = null;\n\n/**\n * Callbacks waiting for a port\n * @type {Array<function((MessagePort|u2f.WrappedChromeRuntimePort_))>}\n * @private\n */\nu2f.waitingForPort_ = [];\n\n/**\n * A counter for requestIds.\n * @type {number}\n * @private\n */\nu2f.reqCounter_ = 0;\n\n/**\n * A map from requestIds to client callbacks\n * @type {Object.<number,(function((u2f.Error|u2f.RegisterResponse))\n *                       |function((u2f.Error|u2f.SignResponse)))>}\n * @private\n */\nu2f.callbackMap_ = {};\n\n/**\n * Creates or retrieves the MessagePort singleton to use.\n * @param {function((MessagePort|u2f.WrappedChromeRuntimePort_))} callback\n * @private\n */\nu2f.getPortSingleton_ = function(callback) {\n  if (u2f.port_) {\n    callback(u2f.port_);\n  } else {\n    if (u2f.waitingForPort_.length == 0) {\n      u2f.getMessagePort(function(port) {\n        u2f.port_ = port;\n        u2f.port_.addEventListener('message',\n            /** @type {function(Event)} */ (u2f.responseHandler_));\n\n        // Careful, here be async callbacks. Maybe.\n        while (u2f.waitingForPort_.length)\n          u2f.waitingForPort_.shift()(u2f.port_);\n      });\n    }\n    u2f.waitingForPort_.push(callback);\n  }\n};\n\n/**\n * Handles response messages from the extension.\n * @param {MessageEvent.<u2f.Response>} message\n * @private\n */\nu2f.responseHandler_ = function(message) {\n  var response = message.data;\n  var reqId = response['requestId'];\n  if (!reqId || !u2f.callbackMap_[reqId]) {\n    console.error('Unknown or missing requestId in response.');\n    return;\n  }\n  var cb = u2f.callbackMap_[reqId];\n  delete u2f.callbackMap_[reqId];\n  cb(response['responseData']);\n};\n\n/**\n * Calls the callback with true or false as first and only argument\n * @param {Function} callback\n */\nu2f.isSupported = function(callback) {\n  var hasCalledBack = false;\n  function reply(value) {\n    if (hasCalledBack)\n      return;\n    hasCalledBack = true;\n    callback(value);\n  }\n  u2f.getApiVersion(\n    function (response) {\n      js_api_version = response['js_api_version'] === undefined ? 0 : response['js_api_version'];\n      reply(true);\n    }\n  );\n  // No response from extension within 1500ms -> no support\n  setTimeout(reply.bind(null, false), 1500);\n};\n\n/**\n * Dispatches an array of sign requests to available U2F tokens.\n * If the JS API version supported by the extension is unknown, it first sends a\n * message to the extension to find out the supported API version and then it sends\n * the sign request.\n * @param {string=} appId\n * @param {string=} challenge\n * @param {Array<u2f.RegisteredKey>} registeredKeys\n * @param {function((u2f.Error|u2f.SignResponse))} callback\n * @param {number=} opt_timeoutSeconds\n */\nu2f.sign = function(appId, challenge, registeredKeys, callback, opt_timeoutSeconds) {\n  if (js_api_version === undefined) {\n    // Send a message to get the extension to JS API version, then send the actual sign request.\n    u2f.getApiVersion(\n        function (response) {\n          js_api_version = response['js_api_version'] === undefined ? 0 : response['js_api_version'];\n          console.log(\"Extension JS API Version: \", js_api_version);\n          u2f.sendSignRequest(appId, challenge, registeredKeys, callback, opt_timeoutSeconds);\n        });\n  } else {\n    // We know the JS API version. Send the actual sign request in the supported API version.\n    u2f.sendSignRequest(appId, challenge, registeredKeys, callback, opt_timeoutSeconds);\n  }\n};\n\n/**\n * Dispatches an array of sign requests to available U2F tokens.\n * @param {string=} appId\n * @param {string=} challenge\n * @param {Array<u2f.RegisteredKey>} registeredKeys\n * @param {function((u2f.Error|u2f.SignResponse))} callback\n * @param {number=} opt_timeoutSeconds\n */\nu2f.sendSignRequest = function(appId, challenge, registeredKeys, callback, opt_timeoutSeconds) {\n  u2f.getPortSingleton_(function(port) {\n    var reqId = ++u2f.reqCounter_;\n    u2f.callbackMap_[reqId] = callback;\n    var timeoutSeconds = (typeof opt_timeoutSeconds !== 'undefined' ?\n        opt_timeoutSeconds : u2f.EXTENSION_TIMEOUT_SEC);\n    var req = u2f.formatSignRequest_(appId, challenge, registeredKeys, timeoutSeconds, reqId);\n    port.postMessage(req);\n  });\n};\n\n/**\n * Dispatches register requests to available U2F tokens. An array of sign\n * requests identifies already registered tokens.\n * If the JS API version supported by the extension is unknown, it first sends a\n * message to the extension to find out the supported API version and then it sends\n * the register request.\n * @param {string=} appId\n * @param {Array<u2f.RegisterRequest>} registerRequests\n * @param {Array<u2f.RegisteredKey>} registeredKeys\n * @param {function((u2f.Error|u2f.RegisterResponse))} callback\n * @param {number=} opt_timeoutSeconds\n */\nu2f.register = function(appId, registerRequests, registeredKeys, callback, opt_timeoutSeconds) {\n  if (js_api_version === undefined) {\n    // Send a message to get the extension to JS API version, then send the actual register request.\n    u2f.getApiVersion(\n        function (response) {\n          js_api_version = response['js_api_version'] === undefined ? 0: response['js_api_version'];\n          console.log(\"Extension JS API Version: \", js_api_version);\n          u2f.sendRegisterRequest(appId, registerRequests, registeredKeys,\n              callback, opt_timeoutSeconds);\n        });\n  } else {\n    // We know the JS API version. Send the actual register request in the supported API version.\n    u2f.sendRegisterRequest(appId, registerRequests, registeredKeys,\n        callback, opt_timeoutSeconds);\n  }\n};\n\n/**\n * Dispatches register requests to available U2F tokens. An array of sign\n * requests identifies already registered tokens.\n * @param {string=} appId\n * @param {Array<u2f.RegisterRequest>} registerRequests\n * @param {Array<u2f.RegisteredKey>} registeredKeys\n * @param {function((u2f.Error|u2f.RegisterResponse))} callback\n * @param {number=} opt_timeoutSeconds\n */\nu2f.sendRegisterRequest = function(appId, registerRequests, registeredKeys, callback, opt_timeoutSeconds) {\n  u2f.getPortSingleton_(function(port) {\n    var reqId = ++u2f.reqCounter_;\n    u2f.callbackMap_[reqId] = callback;\n    var timeoutSeconds = (typeof opt_timeoutSeconds !== 'undefined' ?\n        opt_timeoutSeconds : u2f.EXTENSION_TIMEOUT_SEC);\n    var req = u2f.formatRegisterRequest_(\n        appId, registeredKeys, registerRequests, timeoutSeconds, reqId);\n    port.postMessage(req);\n  });\n};\n\n\n/**\n * Dispatches a message to the extension to find out the supported\n * JS API version.\n * If the user is on a mobile phone and is thus using Google Authenticator instead\n * of the Chrome extension, don't send the request and simply return 0.\n * @param {function((u2f.Error|u2f.GetJsApiVersionResponse))} callback\n * @param {number=} opt_timeoutSeconds\n */\nu2f.getApiVersion = function(callback, opt_timeoutSeconds) {\n u2f.getPortSingleton_(function(port) {\n   // If we are using Android Google Authenticator or iOS client app,\n   // do not fire an intent to ask which JS API version to use.\n   if (port.getPortType) {\n     var apiVersion;\n     switch (port.getPortType()) {\n       case 'WrappedIosPort_':\n       case 'WrappedAuthenticatorPort_':\n         apiVersion = 1.1;\n         break;\n\n       default:\n         apiVersion = 0;\n         break;\n     }\n     callback({ 'js_api_version': apiVersion });\n     return;\n   }\n    var reqId = ++u2f.reqCounter_;\n    u2f.callbackMap_[reqId] = callback;\n    var req = {\n      type: u2f.MessageTypes.U2F_GET_API_VERSION_REQUEST,\n      timeoutSeconds: (typeof opt_timeoutSeconds !== 'undefined' ?\n          opt_timeoutSeconds : u2f.EXTENSION_TIMEOUT_SEC),\n      requestId: reqId\n    };\n    port.postMessage(req);\n  });\n};\n","'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// @ts-ignore\nvar generated_google_u2f_api_1 = require(\"./generated-google-u2f-api\");\n// Feature detection (yes really)\n// For IE and Edge detection, see https://stackoverflow.com/questions/31757852#31757969\n// and https://stackoverflow.com/questions/56360225#56361977\nvar isBrowser = (typeof navigator !== 'undefined') && !!navigator.userAgent;\nvar isSafari = isBrowser && navigator.userAgent.match(/Safari\\//)\n    && !navigator.userAgent.match(/Chrome\\//);\nvar isEDGE = isBrowser && /(Edge\\/)|(edg\\/)/i.test(navigator.userAgent);\nvar isIE = isBrowser && /(MSIE 9|MSIE 10|rv:11.0)/i.test(navigator.userAgent);\nvar _backend = null;\nfunction getBackend() {\n    if (_backend)\n        return _backend;\n    var supportChecker = new Promise(function (resolve, reject) {\n        function notSupported() {\n            resolve({ u2f: null });\n        }\n        if (!isBrowser)\n            return notSupported();\n        if (isSafari)\n            // Safari doesn't support U2F, and the Safari-FIDO-U2F\n            // extension lacks full support (Multi-facet apps), so we\n            // block it until proper support.\n            return notSupported();\n        var hasNativeSupport = (typeof window.u2f !== 'undefined') &&\n            (typeof window.u2f.sign === 'function');\n        if (hasNativeSupport)\n            return resolve({ u2f: window.u2f });\n        if (isEDGE || isIE)\n            // We don't want to check for Google's extension hack on EDGE & IE\n            // as it'll cause trouble (popups, etc)\n            return notSupported();\n        if (location.protocol === 'http:')\n            // U2F isn't supported over http, only https\n            return notSupported();\n        if (typeof MessageChannel === 'undefined')\n            // Unsupported browser, the chrome hack would throw\n            return notSupported();\n        // Test for google extension support\n        generated_google_u2f_api_1.chromeApi.isSupported(function (ok) {\n            if (ok)\n                resolve({ u2f: generated_google_u2f_api_1.chromeApi });\n            else\n                notSupported();\n        });\n    })\n        .then(function (response) {\n        _backend = response.u2f ? supportChecker : null;\n        return response;\n    });\n    return supportChecker;\n}\nexports.ErrorCodes = {\n    OK: 0,\n    OTHER_ERROR: 1,\n    BAD_REQUEST: 2,\n    CONFIGURATION_UNSUPPORTED: 3,\n    DEVICE_INELIGIBLE: 4,\n    TIMEOUT: 5\n};\nexports.ErrorNames = {\n    \"0\": \"OK\",\n    \"1\": \"OTHER_ERROR\",\n    \"2\": \"BAD_REQUEST\",\n    \"3\": \"CONFIGURATION_UNSUPPORTED\",\n    \"4\": \"DEVICE_INELIGIBLE\",\n    \"5\": \"TIMEOUT\"\n};\nfunction makeError(msg, err) {\n    var code = err != null ? err.errorCode : 1; // Default to OTHER_ERROR\n    var type = exports.ErrorNames[('' + code)];\n    var error = new Error(msg);\n    error.metaData = { type: type, code: code };\n    return error;\n}\nfunction isSupported() {\n    return getBackend()\n        .then(function (backend) { return !!backend.u2f; });\n}\nexports.isSupported = isSupported;\nfunction _ensureSupport(backend) {\n    if (!backend.u2f) {\n        if (location.protocol === 'http:')\n            throw new Error(\"U2F isn't supported over http, only https\");\n        throw new Error(\"U2F not supported\");\n    }\n}\nfunction ensureSupport() {\n    return getBackend()\n        .then(_ensureSupport);\n}\nexports.ensureSupport = ensureSupport;\nfunction arrayify(value) {\n    if (value != null && Array.isArray(value))\n        return value;\n    return value == null\n        ? []\n        : Array.isArray(value)\n            ? value.slice() : [value];\n}\nfunction register(registerRequests, signRequests, timeout) {\n    var _registerRequests = arrayify(registerRequests);\n    if (typeof signRequests === 'number' && typeof timeout === 'undefined') {\n        timeout = signRequests;\n        signRequests = [];\n    }\n    var _signRequests = arrayify(signRequests);\n    return getBackend()\n        .then(function (backend) {\n        _ensureSupport(backend);\n        var u2f = backend.u2f;\n        return new Promise(function (resolve, reject) {\n            function callback(response) {\n                if (response.errorCode)\n                    reject(makeError(\"Registration failed\", response));\n                else {\n                    delete response.errorCode;\n                    resolve(response);\n                }\n            }\n            var appId = _registerRequests[0].appId;\n            u2f.register(appId, _registerRequests, _signRequests, callback, timeout);\n        });\n    });\n}\nexports.register = register;\nfunction sign(signRequests, timeout) {\n    var _signRequests = arrayify(signRequests);\n    return getBackend()\n        .then(function (backend) {\n        _ensureSupport(backend);\n        var u2f = backend.u2f;\n        return new Promise(function (resolve, reject) {\n            var _a;\n            function callback(response) {\n                if (response.errorCode)\n                    reject(makeError(\"Sign failed\", response));\n                else {\n                    delete response.errorCode;\n                    resolve(response);\n                }\n            }\n            var appId = _signRequests[0].appId;\n            var challenge = _signRequests[0].challenge;\n            var registeredKeys = (_a = []).concat.apply(_a, _signRequests\n                .map(function (_a) {\n                var version = _a.version, keyHandle = _a.keyHandle, appId = _a.appId;\n                return arrayify(keyHandle)\n                    .map(function (keyHandle) {\n                    return ({ version: version, keyHandle: keyHandle, appId: appId });\n                });\n            }));\n            u2f.sign(appId, challenge, registeredKeys, callback, timeout);\n        });\n    });\n}\nexports.sign = sign;\n//# sourceMappingURL=u2f-api.js.map","'use strict';\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar u2fApi = require(\"./lib/u2f-api\");\n__export(require(\"./lib/u2f-api\"));\nexports.default = u2fApi;\n//# sourceMappingURL=index.js.map","import { __assign, __extends } from \"tslib\";\r\nimport * as u2fApi from 'u2f-api';\r\nimport { Credential, Base64Url } from '@digitalpersona/core';\r\nimport { Enroller } from '../../private';\r\n/**\r\n * Universal Second Factor (U2F) enrollment API.\r\n */\r\nvar U2FEnroll = /** @class */ (function (_super) {\r\n    __extends(U2FEnroll, _super);\r\n    /** Constructs a new U2F enrollment API object.\r\n     * @param context - an {@link EnrollmentContext|enrollment context}.\r\n     * @param appId - an AppID of the service.\r\n     */\r\n    function U2FEnroll(context, appId) {\r\n        var _this = _super.call(this, context) || this;\r\n        if (!appId)\r\n            throw new Error(\"appId\");\r\n        _this.appId = appId;\r\n        return _this;\r\n    }\r\n    /** Reads a U2F enrollment availability.\r\n     * @returns a fulfilled promise when a U2F can be enrolled, a rejected promise otherwise.\r\n     */\r\n    U2FEnroll.prototype.canEnroll = function () {\r\n        return _super.prototype._canEnroll.call(this, Credential.U2F);\r\n    };\r\n    /**\r\n     * Enrolls a U2F token.\r\n     * @returns a promise to perform the enrollment or reject in case of an error.\r\n     */\r\n    U2FEnroll.prototype.enroll = function () {\r\n        var _this = this;\r\n        var version = \"U2F_V2\";\r\n        var appId = this.appId;\r\n        var timestamp = Math.round(new Date().getTime() / (U2FEnroll.TIME_WINDOW * 1000));\r\n        var challenge = Base64Url.fromUtf16(timestamp.toString());\r\n        var registerRequests = [{ version: version, appId: appId, challenge: challenge }];\r\n        return u2fApi\r\n            .register(registerRequests, [], U2FEnroll.TIMEOUT)\r\n            .then(function (response) {\r\n            return _super.prototype._enroll.call(_this, new Credential(Credential.U2F, __assign({ version: version, appId: appId }, response)));\r\n        });\r\n    };\r\n    /** Deletes the U2F enrollment.\r\n     * @returns a promise to delete the enrollment or reject in case of an error.\r\n     */\r\n    U2FEnroll.prototype.unenroll = function () {\r\n        return _super.prototype._unenroll.call(this, new Credential(Credential.U2F));\r\n    };\r\n    U2FEnroll.TIMEOUT = 20;\r\n    U2FEnroll.TIME_WINDOW = 30;\r\n    return U2FEnroll;\r\n}(Enroller));\r\nexport { U2FEnroll };\r\n//# sourceMappingURL=enroll.js.map","import { FingerprintReader, SampleFormat } from '@digitalpersona/devices'\nimport { BioSample, FingerPosition } from '@digitalpersona/core';\nimport { EnrollmentContext, FingerprintsEnroll } from '@digitalpersona/enrollment';\n\n/* Digitalpersona Devices API */\n\nclass reader {\n\tconstructor(options = undefined) {\n\t\ttry {\n\t\t\tconsole.log( `Initializing reader` );\n\n\t\t\tif ( !options )\n\t\t\t\tconsole.log( 'Missing options. Using default WebSdk options' );\n\t\t\tthis.deviceReady = false;\n\t\t\tthis.webSdkOptions = options;\n\t\t\tthis.reader = new FingerprintReader( this.webSdkOptions );\n\t\t\tthis.reader.on( \"DeviceConnected\", this.onDeviceConnected );\n\t\t\tthis.reader.on( \"SamplesAcquired\", this.onSamplesAcquired );\n\t\t\tthis.reader.on( \"AcquisitionStarted\", this.onAcquisitionStarted );\n\t\t\tthis.reader.on( \"AcquisitionStopped\", this.onAcquisitionStopped );\n\t\t\tthis.reader.on( \"QualityReported\", this.onQualityReported );\n\t\t\tthis.reader.on( \"ErrorOccurred\", this.onReaderError );\n\t\t\tthis.reader.on( \"ConnectionFailed\", this.onConnectionError );\n\t\t\tthis.reader.on( \"DeviceDisconnected\", this.onDeviceDisconnected );\n\t\t\tconsole.log( `Device initialization complete` );\n\n\t\t} catch ( error ) {\n\t\t\tthis.handleError( error )\n\t\t}\n\t}\n\n\tonDeviceConnected(event) {\n\t\tthis.deviceReady = true;\n\t\tconsole.log( 'Device is connected' )\n\t}\n\n\tonDeviceDisconnected(event) {\n\t\tconsole.log( 'Device is disconnected' )\n\t}\n\n\tonQualityReported(event) {\n\t\tconsole.log( 'Showing quality report' )\n\t}\n\n\tonConnectionError(event) {\n\t\tthis.handleError( event, 'Connection Error' )\n\t}\n\n\tonReaderError(event) {\n\t\tthis.handleError( event )\n\t}\n\n\t/**\n\t * When fingerprint acquisition mode is activated successfully*/\n\tasync onAcquisitionStarted(event) {\n\t\t/*Waiting for a finger*/\n\t\tconsole.log( 'Fingerprint reading activated successfully', event )\n\t}\n\n\t/*On successful scan*/\n\tasync onSamplesAcquired(event) {\n\t\tconsole.log( 'Fingerprint sample acquired' );\n\t\tthis.samples = event.samples;\n\t\tthis.notifyOnToken( this.samples )\n\t}\n\n\t/*When fingerprint acquisition mode is deactivated*/\n\tasync onAcquisitionStopped(event) {\n\t\tconsole.log( 'Fingerprint reading stopped', event );\n\t}\n\n\tnotifyOnToken(token) {\n\t\tconsole.log( { token } )\n\t}\n\n\tasync submitFingerprints(context, samples, pos) {\n\t\ttry {\n\t\t\tconst api = new FingerprintsEnroll( context );\n\t\t\tawait api.enroll( pos, samples );\n\t\t} catch ( error ) {\n\t\t\tthis.handleError( error );\n\t\t}\n\t}\n\n\thandleError(error, title = '  ') {\n\t\tconsole.error( title ?? title, error )\n\t}\n\n\tasync startReading() {\n\t\ttry {\n\t\t\tif ( !this.deviceReady )\n\t\t\t\tthrow new Error( 'Device is not Loaded' );\n\t\t\t/*Set fingerprint activation mode to true*/\n\t\t\tawait this.reader.startAcquisition( SampleFormat.Intermediate );\n\t\t} catch ( err ) {\n\t\t\tthis.handleError( err );\n\t\t}\n\t}\n\n\tasync stopReading() {\n\t\ttry {\n\t\t\tawait this.reader.stopAcquisition()\n\t\t} catch ( err ) {\n\t\t\tthis.handleError( err )\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.reader.off();\n\t\tdelete this.reader;\n\t}\n}\n\nexport default reader;\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__read","o","m","Symbol","iterator","r","ar","e","next","done","push","value","error","__spread","concat","CustomAction","u2f","js_api_version","EXTENSION_ID","MessageTypes","ErrorCodes","getMessagePort","callback","chrome","runtime","msg","type","U2F_SIGN_REQUEST","signRequests","sendMessage","lastError","getChromeRuntimePort_","getIframePort_","isAndroidChrome_","getAuthenticatorPort_","isIosChrome_","getIosPort_","userAgent","navigator","indexOf","platform","port","connect","setTimeout","WrappedChromeRuntimePort_","WrappedAuthenticatorPort_","WrappedIosPort_","port_","formatSignRequest_","appId","challenge","registeredKeys","timeoutSeconds","reqId","undefined","version","keyHandle","requestId","formatRegisterRequest_","registerRequests","U2F_REGISTER_REQUEST","postMessage","message","addEventListener","eventName","handler","name","toLowerCase","onMessage","addListener","console","requestId_","requestObject_","intentUrl","INTENT_URL_BASE_","encodeURIComponent","JSON","stringify","document","location","getPortType","self","window","onRequestUpdate_","bind","messageObject","parse","data","errorCode","responseObject","str","url","encodeURI","replace","iframeOrigin","iframe","createElement","src","setAttribute","body","appendChild","channel","MessageChannel","ready","port1","removeEventListener","start","contentWindow","port2","EXTENSION_TIMEOUT_SEC","waitingForPort_","reqCounter_","callbackMap_","getPortSingleton_","responseHandler_","shift","response","cb","isSupported","hasCalledBack","reply","getApiVersion","sign","opt_timeoutSeconds","log","sendSignRequest","req","register","sendRegisterRequest","apiVersion","U2F_GET_API_VERSION_REQUEST","commonjsHelpers.createCommonjsModule","u2fApi.register","reader","options","deviceReady","webSdkOptions","FingerprintReader","on","onDeviceConnected","onSamplesAcquired","onAcquisitionStarted","onAcquisitionStopped","onQualityReported","onReaderError","onConnectionError","onDeviceDisconnected","handleError","event","samples","notifyOnToken","token","submitFingerprints","context","pos","api","FingerprintsEnroll","enroll","title","startReading","Error","startAcquisition","SampleFormat","Intermediate","err","stopReading","stopAcquisition","destroy","off"],"mappings":"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"}